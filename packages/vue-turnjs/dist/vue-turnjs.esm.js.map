{"version":3,"file":"vue-turnjs.esm.js","sources":["../lib/turn.js","../node_modules/nanoid/index.js","../src/lib-components/turn.vue","../node_modules/vue-runtime-helpers/dist/normalize-component.mjs","../lib/modernizr-custom.js","../lib/jquerypp.custom.js","../lib/jquery.bookblock.modified.js","../src/lib-components/bookblock.vue","../src/lib-components/bookblock2.vue","../src/lib-components/index.js","../src/index.js"],"sourcesContent":["/**\n * turn.js 4th release\n * turnjs.com\n * turnjs.com/license.txt\n *\n * Copyright (C) 2012 Emmanuel Garcia\n * All rights reserved\n **/\n\n(function($) {\n  \"use strict\";\n\n  var has3d,\n    hasRot,\n    vendor = \"\",\n    version = \"4.1.0\",\n    PI = Math.PI,\n    A90 = PI / 2,\n    isTouch = \"ontouchstart\" in window,\n    mouseEvents = isTouch\n      ? {\n          down: \"touchstart\",\n          move: \"touchmove\",\n          up: \"touchend\",\n          over: \"touchstart\",\n          out: \"touchend\"\n        }\n      : {\n          down: \"mousedown\",\n          move: \"mousemove\",\n          up: \"mouseup\",\n          over: \"mouseover\",\n          out: \"mouseout\"\n        },\n    // Contansts used for each corner\n    //   | tl * tr |\n    // l | *     * | r\n    //   | bl * br |\n\n    corners = {\n      backward: [\"bl\", \"tl\"],\n      forward: [\"br\", \"tr\"],\n      all: [\"tl\", \"bl\", \"tr\", \"br\", \"l\", \"r\"]\n    },\n    // Display values\n\n    displays = [\"single\", \"double\"],\n    // Direction values\n\n    directions = [\"ltr\", \"rtl\"],\n    // Default options\n\n    turnOptions = {\n      // Enables hardware acceleration\n\n      acceleration: true,\n\n      // Display\n\n      display: \"double\",\n\n      // Duration of transition in milliseconds\n\n      duration: 600,\n\n      // First page\n\n      page: 1,\n\n      // Enables gradients\n\n      gradients: true,\n\n      // Corners used when turning the page\n\n      turnCorners: \"bl,br\",\n\n      // Events\n\n      when: null\n    },\n    flipOptions = {\n      // Size of the active zone of each corner\n\n      cornerSize: 100\n    },\n    // Number of pages in the DOM, minimum value: 6\n\n    pagesInDOM = 6,\n    turnMethods = {\n      // Singleton constructor\n      // $('#selector').turn([options]);\n\n      init: function(options) {\n        // Define constants\n\n        has3d =\n          \"WebKitCSSMatrix\" in window ||\n          \"MozPerspective\" in document.body.style;\n        hasRot = rotationAvailable();\n        vendor = getPrefix();\n\n        var i,\n          that = this,\n          pageNum = 0,\n          data = this.data(),\n          ch = this.children();\n\n        // Set initial configuration\n\n        options = $.extend(\n          {\n            width: this.width(),\n            height: this.height(),\n            direction: this.attr(\"dir\") || this.css(\"direction\") || \"ltr\"\n          },\n          turnOptions,\n          options\n        );\n\n        data.opts = options;\n        data.pageObjs = {};\n        data.pages = {};\n        data.pageWrap = {};\n        data.pageZoom = {};\n        data.pagePlace = {};\n        data.pageMv = [];\n        data.zoom = 1;\n        data.totalPages = options.pages || 0;\n        data.eventHandlers = {\n          touchStart: $.proxy(turnMethods._touchStart, this),\n          touchMove: $.proxy(turnMethods._touchMove, this),\n          touchEnd: $.proxy(turnMethods._touchEnd, this),\n          start: $.proxy(turnMethods._eventStart, this)\n        };\n\n        // Add event listeners\n\n        if (options.when)\n          for (i in options.when)\n            if (has(i, options.when)) this.bind(i, options.when[i]);\n\n        // Set the css\n\n        this.css({\n          position: \"relative\",\n          width: options.width,\n          height: options.height\n        });\n\n        // Set the initial display\n\n        this.turn(\"display\", options.display);\n\n        // Set the direction\n\n        if (options.direction !== \"\") this.turn(\"direction\", options.direction);\n\n        // Prevent blue screen problems of switching to hardware acceleration mode\n        // By forcing hardware acceleration for ever\n\n        if (has3d && !isTouch && options.acceleration)\n          this.transform(translate(0, 0, true));\n\n        // Add pages from the DOM\n\n        for (i = 0; i < ch.length; i++) {\n          if ($(ch[i]).attr(\"ignore\") != \"1\") {\n            this.turn(\"addPage\", ch[i], ++pageNum);\n          }\n        }\n\n        // Event listeners\n\n        $(this)\n          .bind(mouseEvents.down, data.eventHandlers.touchStart)\n          .bind(\"end\", turnMethods._eventEnd)\n          .bind(\"pressed\", turnMethods._eventPressed)\n          .bind(\"released\", turnMethods._eventReleased)\n          .bind(\"flip\", turnMethods._flip);\n\n        $(this)\n          .parent()\n          .bind(\"start\", data.eventHandlers.start);\n\n        $(document)\n          .bind(mouseEvents.move, data.eventHandlers.touchMove)\n          .bind(mouseEvents.up, data.eventHandlers.touchEnd);\n\n        // Set the initial page\n\n        this.turn(\"page\", options.page);\n\n        // This flipbook is ready\n\n        data.done = true;\n\n        return this;\n      },\n\n      // Adds a page from external data\n\n      addPage: function(element, page) {\n        var currentPage,\n          className,\n          incPages = false,\n          data = this.data(),\n          lastPage = data.totalPages + 1;\n\n        if (data.destroying) return false;\n\n        // Read the page number from the className of `element` - format: p[0-9]+\n\n        if ((currentPage = /\\bp([0-9]+)\\b/.exec($(element).attr(\"class\"))))\n          page = parseInt(currentPage[1], 10);\n\n        if (page) {\n          if (page == lastPage) incPages = true;\n          else if (page > lastPage)\n            throw turnError('Page \"' + page + '\" cannot be inserted');\n        } else {\n          page = lastPage;\n          incPages = true;\n        }\n\n        if (page >= 1 && page <= lastPage) {\n          if (data.display == \"double\") className = page % 2 ? \" odd\" : \" even\";\n          else className = \"\";\n\n          // Stop animations\n          if (data.done) this.turn(\"stop\");\n\n          // Move pages if it's necessary\n          if (page in data.pageObjs) turnMethods._movePages.call(this, page, 1);\n\n          // Increase the number of pages\n          if (incPages) data.totalPages = lastPage;\n\n          // Add element\n          data.pageObjs[page] = $(element)\n            .css({ float: \"left\" })\n            .addClass(\"page p\" + page + className);\n\n          if (!hasHardPage() && data.pageObjs[page].hasClass(\"hard\")) {\n            data.pageObjs[page].removeClass(\"hard\");\n          }\n\n          // Add page\n          turnMethods._addPage.call(this, page);\n\n          // Remove pages out of range\n          turnMethods._removeFromDOM.call(this);\n        }\n\n        return this;\n      },\n\n      // Adds a page\n\n      _addPage: function(page) {\n        var data = this.data(),\n          element = data.pageObjs[page];\n\n        if (element)\n          if (turnMethods._necessPage.call(this, page)) {\n            if (!data.pageWrap[page]) {\n              // Wrapper\n              data.pageWrap[page] = $(\"<div/>\", {\n                class: \"page-wrapper\",\n                page: page,\n                css: {\n                  position: \"absolute\",\n                  overflow: \"hidden\"\n                }\n              });\n\n              // Append to this flipbook\n              this.append(data.pageWrap[page]);\n\n              if (!data.pagePlace[page]) {\n                data.pagePlace[page] = page;\n                // Move `pageObjs[page]` to wrapper\n                data.pageObjs[page].appendTo(data.pageWrap[page]);\n              }\n\n              // Set the size of the page\n              var prop = turnMethods._pageSize.call(this, page, true);\n              element.css({ width: prop.width, height: prop.height });\n              data.pageWrap[page].css(prop);\n            }\n\n            if (data.pagePlace[page] == page) {\n              // If the page isn't in another place, create the flip effect\n              turnMethods._makeFlip.call(this, page);\n            }\n          } else {\n            // Place\n            data.pagePlace[page] = 0;\n\n            // Remove element from the DOM\n            if (data.pageObjs[page]) data.pageObjs[page].remove();\n          }\n      },\n\n      // Checks if a page is in memory\n\n      hasPage: function(page) {\n        return has(page, this.data().pageObjs);\n      },\n\n      // Centers the flipbook\n\n      center: function(page) {\n        var data = this.data(),\n          size = $(this).turn(\"size\"),\n          left = 0;\n\n        if (!data.noCenter) {\n          if (data.display == \"double\") {\n            var view = this.turn(\"view\", page || data.tpage || data.page);\n\n            if (data.direction == \"ltr\") {\n              if (!view[0]) left -= size.width / 4;\n              else if (!view[1]) left += size.width / 4;\n            } else {\n              if (!view[0]) left += size.width / 4;\n              else if (!view[1]) left -= size.width / 4;\n            }\n          }\n\n          $(this).css({ marginLeft: left });\n        }\n\n        return this;\n      },\n\n      // Destroys the flipbook\n\n      destroy: function() {\n        var page,\n          flipbook = this,\n          data = this.data(),\n          events = [\n            \"end\",\n            \"first\",\n            \"flip\",\n            \"last\",\n            \"pressed\",\n            \"released\",\n            \"start\",\n            \"turning\",\n            \"turned\",\n            \"zooming\",\n            \"missing\"\n          ];\n\n        if (trigger(\"destroying\", this) == \"prevented\") return;\n\n        data.destroying = true;\n\n        $.each(events, function(index, eventName) {\n          flipbook.unbind(eventName);\n        });\n\n        this.parent().unbind(\"start\", data.eventHandlers.start);\n\n        $(document)\n          .unbind(mouseEvents.move, data.eventHandlers.touchMove)\n          .unbind(mouseEvents.up, data.eventHandlers.touchEnd);\n\n        while (data.totalPages !== 0) {\n          this.turn(\"removePage\", data.totalPages);\n        }\n\n        if (data.fparent) data.fparent.remove();\n\n        if (data.shadow) data.shadow.remove();\n\n        this.removeData();\n        data = null;\n\n        return this;\n      },\n\n      // Checks if this element is a flipbook\n\n      is: function() {\n        return typeof this.data().pages == \"object\";\n      },\n\n      // Sets and gets the zoom value\n\n      zoom: function(newZoom) {\n        var data = this.data();\n\n        if (typeof newZoom == \"number\") {\n          if (newZoom < 0.001 || newZoom > 100)\n            throw turnError(newZoom + \" is not a value for zoom\");\n\n          if (trigger(\"zooming\", this, [newZoom, data.zoom]) == \"prevented\")\n            return this;\n\n          var size = this.turn(\"size\"),\n            currentView = this.turn(\"view\"),\n            iz = 1 / data.zoom,\n            newWidth = Math.round(size.width * iz * newZoom),\n            newHeight = Math.round(size.height * iz * newZoom);\n\n          data.zoom = newZoom;\n\n          $(this)\n            .turn(\"stop\")\n            .turn(\"size\", newWidth, newHeight);\n          /*.\n          css({marginTop: size.height * iz / 2 - newHeight / 2});*/\n\n          if (data.opts.autoCenter) this.turn(\"center\");\n          /*else\n            $(this).css({marginLeft: size.width * iz / 2 - newWidth / 2});*/\n\n          turnMethods._updateShadow.call(this);\n\n          for (var i = 0; i < currentView.length; i++) {\n            if (currentView[i] && data.pageZoom[currentView[i]] != data.zoom) {\n              this.trigger(\"zoomed\", [\n                currentView[i],\n                currentView,\n                data.pageZoom[currentView[i]],\n                data.zoom\n              ]);\n\n              data.pageZoom[currentView[i]] = data.zoom;\n            }\n          }\n\n          return this;\n        } else return data.zoom;\n      },\n\n      // Gets the size of a page\n\n      _pageSize: function(page, position) {\n        var data = this.data(),\n          prop = {};\n\n        if (data.display == \"single\") {\n          prop.width = this.width();\n          prop.height = this.height();\n\n          if (position) {\n            prop.top = 0;\n            prop.left = 0;\n            prop.right = \"auto\";\n          }\n        } else {\n          var pageWidth = this.width() / 2,\n            pageHeight = this.height();\n\n          if (data.pageObjs[page].hasClass(\"own-size\")) {\n            prop.width = data.pageObjs[page].width();\n            prop.height = data.pageObjs[page].height();\n          } else {\n            prop.width = pageWidth;\n            prop.height = pageHeight;\n          }\n\n          if (position) {\n            var odd = page % 2;\n            prop.top = (pageHeight - prop.height) / 2;\n\n            if (data.direction == \"ltr\") {\n              prop[odd ? \"right\" : \"left\"] = pageWidth - prop.width;\n              prop[odd ? \"left\" : \"right\"] = \"auto\";\n            } else {\n              prop[odd ? \"left\" : \"right\"] = pageWidth - prop.width;\n              prop[odd ? \"right\" : \"left\"] = \"auto\";\n            }\n          }\n        }\n\n        return prop;\n      },\n\n      // Prepares the flip effect for a page\n\n      _makeFlip: function(page) {\n        var data = this.data();\n\n        if (!data.pages[page] && data.pagePlace[page] == page) {\n          var single = data.display == \"single\",\n            odd = page % 2;\n\n          data.pages[page] = data.pageObjs[page]\n            .css(turnMethods._pageSize.call(this, page))\n            .flip({\n              page: page,\n              next: odd || single ? page + 1 : page - 1,\n              turn: this\n            })\n            .flip(\"disable\", data.disabled);\n\n          // Issue about z-index\n          turnMethods._setPageLoc.call(this, page);\n\n          data.pageZoom[page] = data.zoom;\n        }\n\n        return data.pages[page];\n      },\n\n      // Makes pages within a range\n\n      _makeRange: function() {\n        var page,\n          range,\n          data = this.data();\n\n        if (data.totalPages < 1) return;\n\n        range = this.turn(\"range\");\n\n        for (page = range[0]; page <= range[1]; page++)\n          turnMethods._addPage.call(this, page);\n      },\n\n      // Returns a range of pages that should be in the DOM\n      // Example:\n      // - page in the current view, return true\n      // * page is in the range, return true\n      // Otherwise, return false\n      //\n      // 1 2-3 4-5 6-7 8-9 10-11 12-13\n      //   **  **  --   **  **\n\n      range: function(page) {\n        var remainingPages,\n          left,\n          right,\n          view,\n          data = this.data();\n\n        page = page || data.tpage || data.page || 1;\n        view = turnMethods._view.call(this, page);\n\n        if (page < 1 || page > data.totalPages)\n          throw turnError('\"' + page + '\" is not a valid page');\n\n        view[1] = view[1] || view[0];\n\n        if (view[0] >= 1 && view[1] <= data.totalPages) {\n          remainingPages = Math.floor((pagesInDOM - 2) / 2);\n\n          if (data.totalPages - view[1] > view[0]) {\n            left = Math.min(view[0] - 1, remainingPages);\n            right = 2 * remainingPages - left;\n          } else {\n            right = Math.min(data.totalPages - view[1], remainingPages);\n            left = 2 * remainingPages - right;\n          }\n        } else {\n          left = pagesInDOM - 1;\n          right = pagesInDOM - 1;\n        }\n\n        return [\n          Math.max(1, view[0] - left),\n          Math.min(data.totalPages, view[1] + right)\n        ];\n      },\n\n      // Detects if a page is within the range of `pagesInDOM` from the current view\n\n      _necessPage: function(page) {\n        if (page === 0) return true;\n\n        var range = this.turn(\"range\");\n\n        return (\n          this.data().pageObjs[page].hasClass(\"fixed\") ||\n          (page >= range[0] && page <= range[1])\n        );\n      },\n\n      // Releases memory by removing pages from the DOM\n\n      _removeFromDOM: function() {\n        var page,\n          data = this.data();\n\n        for (page in data.pageWrap)\n          if (\n            has(page, data.pageWrap) &&\n            !turnMethods._necessPage.call(this, page)\n          )\n            turnMethods._removePageFromDOM.call(this, page);\n      },\n\n      // Removes a page from DOM and its internal references\n\n      _removePageFromDOM: function(page) {\n        var data = this.data();\n\n        if (data.pages[page]) {\n          var dd = data.pages[page].data();\n\n          flipMethods._moveFoldingPage.call(data.pages[page], false);\n\n          if (dd.f && dd.f.fwrapper) dd.f.fwrapper.remove();\n\n          data.pages[page].removeData();\n          data.pages[page].remove();\n          delete data.pages[page];\n        }\n\n        if (data.pageObjs[page]) data.pageObjs[page].remove();\n\n        if (data.pageWrap[page]) {\n          data.pageWrap[page].remove();\n          delete data.pageWrap[page];\n        }\n\n        turnMethods._removeMv.call(this, page);\n\n        delete data.pagePlace[page];\n        delete data.pageZoom[page];\n      },\n\n      // Removes a page\n\n      removePage: function(page) {\n        var data = this.data();\n\n        // Delete all the pages\n        if (page == \"*\") {\n          while (data.totalPages !== 0) {\n            this.turn(\"removePage\", data.totalPages);\n          }\n        } else {\n          if (page < 1 || page > data.totalPages)\n            throw turnError(\"The page \" + page + \" doesn't exist\");\n\n          if (data.pageObjs[page]) {\n            // Stop animations\n            this.turn(\"stop\");\n\n            // Remove `page`\n            turnMethods._removePageFromDOM.call(this, page);\n\n            delete data.pageObjs[page];\n          }\n\n          // Move the pages\n          turnMethods._movePages.call(this, page, -1);\n\n          // Resize the size of this flipbook\n          data.totalPages = data.totalPages - 1;\n\n          // Check the current view\n\n          if (data.page > data.totalPages) {\n            data.page = null;\n            turnMethods._fitPage.call(this, data.totalPages);\n          } else {\n            turnMethods._makeRange.call(this);\n            this.turn(\"update\");\n          }\n        }\n\n        return this;\n      },\n\n      // Moves pages\n\n      _movePages: function(from, change) {\n        var page,\n          that = this,\n          data = this.data(),\n          single = data.display == \"single\",\n          move = function(page) {\n            var next = page + change,\n              odd = next % 2,\n              className = odd ? \" odd \" : \" even \";\n\n            if (data.pageObjs[page])\n              data.pageObjs[next] = data.pageObjs[page]\n                .removeClass(\"p\" + page + \" odd even\")\n                .addClass(\"p\" + next + className);\n\n            if (data.pagePlace[page] && data.pageWrap[page]) {\n              data.pagePlace[next] = next;\n\n              if (data.pageObjs[next].hasClass(\"fixed\"))\n                data.pageWrap[next] = data.pageWrap[page].attr(\"page\", next);\n              else\n                data.pageWrap[next] = data.pageWrap[page]\n                  .css(turnMethods._pageSize.call(that, next, true))\n                  .attr(\"page\", next);\n\n              if (data.pages[page])\n                data.pages[next] = data.pages[page].flip(\"options\", {\n                  page: next,\n                  next: single || odd ? next + 1 : next - 1\n                });\n\n              if (change) {\n                delete data.pages[page];\n                delete data.pagePlace[page];\n                delete data.pageZoom[page];\n                delete data.pageObjs[page];\n                delete data.pageWrap[page];\n              }\n            }\n          };\n\n        if (change > 0)\n          for (page = data.totalPages; page >= from; page--) move(page);\n        else for (page = from; page <= data.totalPages; page++) move(page);\n      },\n\n      // Sets or Gets the display mode\n\n      display: function(display) {\n        var data = this.data(),\n          currentDisplay = data.display;\n\n        if (display === undefined) {\n          return currentDisplay;\n        } else {\n          if ($.inArray(display, displays) == -1)\n            throw turnError('\"' + display + '\" is not a value for display');\n\n          switch (display) {\n            case \"single\":\n              // Create a temporal page to use as folded page\n\n              if (!data.pageObjs[0]) {\n                this.turn(\"stop\").css({ overflow: \"hidden\" });\n\n                data.pageObjs[0] = $(\"<div />\", { class: \"page p-temporal\" })\n                  .css({ width: this.width(), height: this.height() })\n                  .appendTo(this);\n              }\n\n              this.addClass(\"shadow\");\n\n              break;\n            case \"double\":\n              // Remove the temporal page\n\n              if (data.pageObjs[0]) {\n                this.turn(\"stop\").css({ overflow: \"\" });\n                data.pageObjs[0].remove();\n                delete data.pageObjs[0];\n              }\n\n              this.removeClass(\"shadow\");\n\n              break;\n          }\n\n          data.display = display;\n\n          if (currentDisplay) {\n            var size = this.turn(\"size\");\n            turnMethods._movePages.call(this, 1, 0);\n            this.turn(\"size\", size.width, size.height).turn(\"update\");\n          }\n\n          return this;\n        }\n      },\n\n      // Gets and sets the direction of the flipbook\n\n      direction: function(dir) {\n        var data = this.data();\n\n        if (dir === undefined) {\n          return data.direction;\n        } else {\n          dir = dir.toLowerCase();\n\n          if ($.inArray(dir, directions) == -1)\n            throw turnError('\"' + dir + '\" is not a value for direction');\n\n          if (dir == \"rtl\") {\n            $(this)\n              .attr(\"dir\", \"ltr\")\n              .css({ direction: \"ltr\" });\n          }\n\n          data.direction = dir;\n\n          if (data.done) this.turn(\"size\", $(this).width(), $(this).height());\n\n          return this;\n        }\n      },\n\n      // Detects animation\n\n      animating: function() {\n        return this.data().pageMv.length > 0;\n      },\n\n      // Gets the current activated corner\n\n      corner: function() {\n        var corner,\n          page,\n          data = this.data();\n\n        for (page in data.pages) {\n          if (has(page, data.pages))\n            if ((corner = data.pages[page].flip(\"corner\"))) {\n              return corner;\n            }\n        }\n\n        return false;\n      },\n\n      // Gets the data stored in the flipbook\n\n      data: function() {\n        return this.data();\n      },\n\n      // Disables and enables the effect\n\n      disable: function(disable) {\n        var page,\n          data = this.data(),\n          view = this.turn(\"view\");\n\n        data.disabled = disable === undefined || disable === true;\n\n        for (page in data.pages) {\n          if (has(page, data.pages))\n            data.pages[page].flip(\n              \"disable\",\n              data.disabled ? true : $.inArray(parseInt(page, 10), view) == -1\n            );\n        }\n\n        return this;\n      },\n\n      // Disables and enables the effect\n\n      disabled: function(disable) {\n        if (disable === undefined) {\n          return this.data().disabled === true;\n        } else {\n          return this.turn(\"disable\", disable);\n        }\n      },\n\n      // Gets and sets the size\n\n      size: function(width, height) {\n        if (width === undefined || height === undefined) {\n          return { width: this.width(), height: this.height() };\n        } else {\n          this.turn(\"stop\");\n\n          var page,\n            prop,\n            data = this.data(),\n            pageWidth = data.display == \"double\" ? width / 2 : width;\n\n          this.css({ width: width, height: height });\n\n          if (data.pageObjs[0])\n            data.pageObjs[0].css({ width: pageWidth, height: height });\n\n          for (page in data.pageWrap) {\n            if (!has(page, data.pageWrap)) continue;\n\n            prop = turnMethods._pageSize.call(this, page, true);\n\n            data.pageObjs[page].css({ width: prop.width, height: prop.height });\n            data.pageWrap[page].css(prop);\n\n            if (data.pages[page])\n              data.pages[page].css({ width: prop.width, height: prop.height });\n          }\n\n          this.turn(\"resize\");\n\n          return this;\n        }\n      },\n\n      // Resizes each page\n\n      resize: function() {\n        var page,\n          data = this.data();\n\n        if (data.pages[0]) {\n          data.pageWrap[0].css({ left: -this.width() });\n          data.pages[0].flip(\"resize\", true);\n        }\n\n        for (page = 1; page <= data.totalPages; page++)\n          if (data.pages[page]) data.pages[page].flip(\"resize\", true);\n\n        turnMethods._updateShadow.call(this);\n\n        if (data.opts.autoCenter) this.turn(\"center\");\n      },\n\n      // Removes an animation from the cache\n\n      _removeMv: function(page) {\n        var i,\n          data = this.data();\n\n        for (i = 0; i < data.pageMv.length; i++)\n          if (data.pageMv[i] == page) {\n            data.pageMv.splice(i, 1);\n            return true;\n          }\n\n        return false;\n      },\n\n      // Adds an animation to the cache\n\n      _addMv: function(page) {\n        var data = this.data();\n\n        turnMethods._removeMv.call(this, page);\n        data.pageMv.push(page);\n      },\n\n      // Gets indexes for a view\n\n      _view: function(page) {\n        var data = this.data();\n\n        page = page || data.page;\n\n        if (data.display == \"double\")\n          return page % 2 ? [page - 1, page] : [page, page + 1];\n        else return [page];\n      },\n\n      // Gets a view\n\n      view: function(page) {\n        var data = this.data(),\n          view = turnMethods._view.call(this, page);\n\n        if (data.display == \"double\")\n          return [\n            view[0] > 0 ? view[0] : 0,\n            view[1] <= data.totalPages ? view[1] : 0\n          ];\n        else return [view[0] > 0 && view[0] <= data.totalPages ? view[0] : 0];\n      },\n\n      // Stops animations\n\n      stop: function(ignore, animate) {\n        if (this.turn(\"animating\")) {\n          var i,\n            opts,\n            page,\n            data = this.data();\n\n          if (data.tpage) {\n            data.page = data.tpage;\n            delete data[\"tpage\"];\n          }\n\n          for (i = 0; i < data.pageMv.length; i++) {\n            if (!data.pageMv[i] || data.pageMv[i] === ignore) continue;\n\n            page = data.pages[data.pageMv[i]];\n            opts = page.data().f.opts;\n\n            page.flip(\"hideFoldedPage\", animate);\n\n            if (!animate) flipMethods._moveFoldingPage.call(page, false);\n\n            if (opts.force) {\n              opts.next = opts.page % 2 === 0 ? opts.page - 1 : opts.page + 1;\n              delete opts[\"force\"];\n            }\n          }\n        }\n\n        this.turn(\"update\");\n\n        return this;\n      },\n\n      // Gets and sets the number of pages\n\n      pages: function(pages) {\n        var data = this.data();\n\n        if (pages) {\n          if (pages < data.totalPages) {\n            for (var page = data.totalPages; page > pages; page--)\n              this.turn(\"removePage\", page);\n          }\n\n          data.totalPages = pages;\n          turnMethods._fitPage.call(this, data.page);\n\n          return this;\n        } else return data.totalPages;\n      },\n\n      // Checks missing pages\n\n      _missing: function(page) {\n        var data = this.data();\n\n        if (data.totalPages < 1) return;\n\n        var p,\n          range = this.turn(\"range\", page),\n          missing = [];\n\n        for (p = range[0]; p <= range[1]; p++) {\n          if (!data.pageObjs[p]) missing.push(p);\n        }\n\n        if (missing.length > 0) this.trigger(\"missing\", [missing]);\n      },\n\n      // Sets a page without effect\n\n      _fitPage: function(page) {\n        var data = this.data(),\n          newView = this.turn(\"view\", page);\n\n        turnMethods._missing.call(this, page);\n\n        if (!data.pageObjs[page]) return;\n\n        data.page = page;\n\n        this.turn(\"stop\");\n\n        for (var i = 0; i < newView.length; i++) {\n          if (newView[i] && data.pageZoom[newView[i]] != data.zoom) {\n            this.trigger(\"zoomed\", [\n              newView[i],\n              newView,\n              data.pageZoom[newView[i]],\n              data.zoom\n            ]);\n\n            data.pageZoom[newView[i]] = data.zoom;\n          }\n        }\n\n        turnMethods._removeFromDOM.call(this);\n        turnMethods._makeRange.call(this);\n        turnMethods._updateShadow.call(this);\n        this.trigger(\"turned\", [page, newView]);\n        this.turn(\"update\");\n\n        if (data.opts.autoCenter) this.turn(\"center\");\n      },\n\n      // Turns the page\n\n      _turnPage: function(page) {\n        var current,\n          next,\n          data = this.data(),\n          place = data.pagePlace[page],\n          view = this.turn(\"view\"),\n          newView = this.turn(\"view\", page);\n\n        if (data.page != page) {\n          var currentPage = data.page;\n\n          if (trigger(\"turning\", this, [page, newView]) == \"prevented\") {\n            if (currentPage == data.page && $.inArray(place, data.pageMv) != -1)\n              data.pages[place].flip(\"hideFoldedPage\", true);\n\n            return;\n          }\n\n          if ($.inArray(1, newView) != -1) this.trigger(\"first\");\n          if ($.inArray(data.totalPages, newView) != -1) this.trigger(\"last\");\n        }\n\n        if (data.display == \"single\") {\n          current = view[0];\n          next = newView[0];\n        } else if (view[1] && page > view[1]) {\n          current = view[1];\n          next = newView[0];\n        } else if (view[0] && page < view[0]) {\n          current = view[0];\n          next = newView[1];\n        }\n\n        var optsCorners = data.opts.turnCorners.split(\",\"),\n          flipData = data.pages[current].data().f,\n          opts = flipData.opts,\n          actualPoint = flipData.point;\n\n        turnMethods._missing.call(this, page);\n\n        if (!data.pageObjs[page]) return;\n\n        this.turn(\"stop\");\n\n        data.page = page;\n\n        turnMethods._makeRange.call(this);\n\n        data.tpage = next;\n\n        if (opts.next != next) {\n          opts.next = next;\n          opts.force = true;\n        }\n\n        this.turn(\"update\");\n\n        flipData.point = actualPoint;\n\n        if (flipData.effect == \"hard\")\n          if (data.direction == \"ltr\")\n            data.pages[current].flip(\"turnPage\", page > current ? \"r\" : \"l\");\n          else data.pages[current].flip(\"turnPage\", page > current ? \"l\" : \"r\");\n        else {\n          if (data.direction == \"ltr\")\n            data.pages[current].flip(\n              \"turnPage\",\n              optsCorners[page > current ? 1 : 0]\n            );\n          else\n            data.pages[current].flip(\n              \"turnPage\",\n              optsCorners[page > current ? 0 : 1]\n            );\n        }\n      },\n\n      // Gets and sets a page\n\n      page: function(page) {\n        var data = this.data();\n\n        if (page === undefined) {\n          return data.page;\n        } else {\n          if (!data.disabled && !data.destroying) {\n            page = parseInt(page, 10);\n\n            if (page > 0 && page <= data.totalPages) {\n              if (page != data.page) {\n                if (!data.done || $.inArray(page, this.turn(\"view\")) != -1)\n                  turnMethods._fitPage.call(this, page);\n                else turnMethods._turnPage.call(this, page);\n              }\n\n              return this;\n            } else {\n              throw turnError(\"The page \" + page + \" does not exist\");\n            }\n          }\n        }\n      },\n\n      // Turns to the next view\n\n      next: function() {\n        return this.turn(\n          \"page\",\n          Math.min(\n            this.data().totalPages,\n            turnMethods._view.call(this, this.data().page).pop() + 1\n          )\n        );\n      },\n\n      // Turns to the previous view\n\n      previous: function() {\n        return this.turn(\n          \"page\",\n          Math.max(\n            1,\n            turnMethods._view.call(this, this.data().page).shift() - 1\n          )\n        );\n      },\n\n      // Shows a peeling corner\n\n      peel: function(corner, animate) {\n        var data = this.data(),\n          view = this.turn(\"view\");\n\n        animate = animate === undefined ? true : animate === true;\n\n        if (corner === false) {\n          this.turn(\"stop\", null, animate);\n        } else {\n          if (data.display == \"single\") {\n            data.pages[data.page].flip(\"peel\", corner, animate);\n          } else {\n            var page;\n\n            if (data.direction == \"ltr\") {\n              page = corner.indexOf(\"l\") != -1 ? view[0] : view[1];\n            } else {\n              page = corner.indexOf(\"l\") != -1 ? view[1] : view[0];\n            }\n\n            if (data.pages[page])\n              data.pages[page].flip(\"peel\", corner, animate);\n          }\n        }\n\n        return this;\n      },\n\n      // Adds a motion to the internal list\n      // This event is called in context of flip\n\n      _addMotionPage: function() {\n        var opts = $(this).data().f.opts,\n          turn = opts.turn,\n          dd = turn.data();\n\n        turnMethods._addMv.call(turn, opts.page);\n      },\n\n      // This event is called in context of flip\n\n      _eventStart: function(e, opts, corner) {\n        var data = opts.turn.data(),\n          actualZoom = data.pageZoom[opts.page];\n\n        if (e.isDefaultPrevented()) {\n          turnMethods._updateShadow.call(opts.turn);\n          return;\n        }\n\n        if (actualZoom && actualZoom != data.zoom) {\n          opts.turn.trigger(\"zoomed\", [\n            opts.page,\n            opts.turn.turn(\"view\", opts.page),\n            actualZoom,\n            data.zoom\n          ]);\n\n          data.pageZoom[opts.page] = data.zoom;\n        }\n\n        if (data.display == \"single\" && corner) {\n          if (\n            (corner.charAt(1) == \"l\" && data.direction == \"ltr\") ||\n            (corner.charAt(1) == \"r\" && data.direction == \"rtl\")\n          ) {\n            opts.next = opts.next < opts.page ? opts.next : opts.page - 1;\n            opts.force = true;\n          } else {\n            opts.next = opts.next > opts.page ? opts.next : opts.page + 1;\n          }\n        }\n\n        turnMethods._addMotionPage.call(e.target);\n        turnMethods._updateShadow.call(opts.turn);\n      },\n\n      // This event is called in context of flip\n\n      _eventEnd: function(e, opts, turned) {\n        var that = $(e.target),\n          data = that.data().f,\n          turn = opts.turn,\n          dd = turn.data();\n\n        if (turned) {\n          var tpage = dd.tpage || dd.page;\n\n          if (tpage == opts.next || tpage == opts.page) {\n            delete dd.tpage;\n\n            turnMethods._fitPage.call(turn, tpage || opts.next, true);\n          }\n        } else {\n          turnMethods._removeMv.call(turn, opts.page);\n          turnMethods._updateShadow.call(turn);\n          turn.turn(\"update\");\n        }\n      },\n\n      // This event is called in context of flip\n\n      _eventPressed: function(e) {\n        var page,\n          data = $(e.target).data().f,\n          turn = data.opts.turn,\n          turnData = turn.data(),\n          pages = turnData.pages;\n\n        turnData.mouseAction = true;\n\n        turn.turn(\"update\");\n\n        return (data.time = new Date().getTime());\n      },\n\n      // This event is called in context of flip\n\n      _eventReleased: function(e, point) {\n        var outArea,\n          page = $(e.target),\n          data = page.data().f,\n          turn = data.opts.turn,\n          turnData = turn.data();\n\n        if (turnData.display == \"single\") {\n          outArea =\n            point.corner == \"br\" || point.corner == \"tr\"\n              ? point.x < page.width() / 2\n              : point.x > page.width() / 2;\n        } else {\n          outArea = point.x < 0 || point.x > page.width();\n        }\n\n        if (new Date().getTime() - data.time < 200 || outArea) {\n          e.preventDefault();\n          turnMethods._turnPage.call(turn, data.opts.next);\n        }\n\n        turnData.mouseAction = false;\n      },\n\n      // This event is called in context of flip\n\n      _flip: function(e) {\n        e.stopPropagation();\n\n        var opts = $(e.target).data().f.opts;\n\n        opts.turn.trigger(\"turn\", [opts.next]);\n\n        if (opts.turn.data().opts.autoCenter) {\n          opts.turn.turn(\"center\", opts.next);\n        }\n      },\n\n      //\n      _touchStart: function() {\n        var data = this.data();\n        for (var page in data.pages) {\n          if (\n            has(page, data.pages) &&\n            flipMethods._eventStart.apply(data.pages[page], arguments) === false\n          ) {\n            return false;\n          }\n        }\n      },\n\n      //\n      _touchMove: function() {\n        var data = this.data();\n        for (var page in data.pages) {\n          if (has(page, data.pages)) {\n            flipMethods._eventMove.apply(data.pages[page], arguments);\n          }\n        }\n      },\n\n      //\n      _touchEnd: function() {\n        var data = this.data();\n        for (var page in data.pages) {\n          if (has(page, data.pages)) {\n            flipMethods._eventEnd.apply(data.pages[page], arguments);\n          }\n        }\n      },\n\n      // Calculate the z-index value for pages during the animation\n\n      calculateZ: function(mv) {\n        var i,\n          page,\n          nextPage,\n          placePage,\n          dpage,\n          that = this,\n          data = this.data(),\n          view = this.turn(\"view\"),\n          currentPage = view[0] || view[1],\n          total = mv.length - 1,\n          r = { pageZ: {}, partZ: {}, pageV: {} },\n          addView = function(page) {\n            var view = that.turn(\"view\", page);\n            if (view[0]) r.pageV[view[0]] = true;\n            if (view[1]) r.pageV[view[1]] = true;\n          };\n\n        for (i = 0; i <= total; i++) {\n          page = mv[i];\n          nextPage = data.pages[page].data().f.opts.next;\n          placePage = data.pagePlace[page];\n          addView(page);\n          addView(nextPage);\n          dpage = data.pagePlace[nextPage] == nextPage ? nextPage : page;\n          r.pageZ[dpage] = data.totalPages - Math.abs(currentPage - dpage);\n          r.partZ[placePage] = data.totalPages * 2 - total + i;\n        }\n\n        return r;\n      },\n\n      // Updates the z-index and display property of every page\n\n      update: function() {\n        var page,\n          data = this.data();\n\n        if (this.turn(\"animating\") && data.pageMv[0] !== 0) {\n          // Update motion\n\n          var p,\n            apage,\n            fixed,\n            pos = this.turn(\"calculateZ\", data.pageMv),\n            corner = this.turn(\"corner\"),\n            actualView = this.turn(\"view\"),\n            newView = this.turn(\"view\", data.tpage);\n\n          for (page in data.pageWrap) {\n            if (!has(page, data.pageWrap)) continue;\n\n            fixed = data.pageObjs[page].hasClass(\"fixed\");\n\n            data.pageWrap[page].css({\n              display: pos.pageV[page] || fixed ? \"\" : \"none\",\n              zIndex:\n                (data.pageObjs[page].hasClass(\"hard\")\n                  ? pos.partZ[page]\n                  : pos.pageZ[page]) || (fixed ? -1 : 0)\n            });\n\n            if ((p = data.pages[page])) {\n              p.flip(\"z\", pos.partZ[page] || null);\n\n              if (pos.pageV[page]) p.flip(\"resize\");\n\n              if (data.tpage) {\n                // Is it turning the page to `tpage`?\n\n                p.flip(\"hover\", false).flip(\n                  \"disable\",\n                  $.inArray(parseInt(page, 10), data.pageMv) == -1 &&\n                    page != newView[0] &&\n                    page != newView[1]\n                );\n              } else {\n                p.flip(\"hover\", corner === false).flip(\n                  \"disable\",\n                  page != actualView[0] && page != actualView[1]\n                );\n              }\n            }\n          }\n        } else {\n          // Update static pages\n\n          for (page in data.pageWrap) {\n            if (!has(page, data.pageWrap)) continue;\n\n            var pageLocation = turnMethods._setPageLoc.call(this, page);\n\n            if (data.pages[page]) {\n              data.pages[page]\n                .flip(\"disable\", data.disabled || pageLocation != 1)\n                .flip(\"hover\", true)\n                .flip(\"z\", null);\n            }\n          }\n        }\n\n        return this;\n      },\n\n      // Updates the position and size of the flipbook's shadow\n\n      _updateShadow: function() {\n        var view,\n          view2,\n          shadow,\n          data = this.data(),\n          width = this.width(),\n          height = this.height(),\n          pageWidth = data.display == \"single\" ? width : width / 2;\n\n        view = this.turn(\"view\");\n\n        if (!data.shadow) {\n          data.shadow = $(\"<div />\", {\n            class: \"shadow\",\n            css: divAtt(0, 0, 0).css\n          }).appendTo(this);\n        }\n\n        for (var i = 0; i < data.pageMv.length; i++) {\n          if (!view[0] || !view[1]) break;\n\n          view = this.turn(\n            \"view\",\n            data.pages[data.pageMv[i]].data().f.opts.next\n          );\n          view2 = this.turn(\"view\", data.pageMv[i]);\n\n          view[0] = view[0] && view2[0];\n          view[1] = view[1] && view2[1];\n        }\n\n        if (!view[0]) shadow = data.direction == \"ltr\" ? 1 : 2;\n        else if (!view[1]) shadow = data.direction == \"ltr\" ? 2 : 1;\n        else shadow = 3;\n\n        switch (shadow) {\n          case 1:\n            data.shadow.css({\n              width: pageWidth,\n              height: height,\n              top: 0,\n              left: pageWidth\n            });\n            break;\n          case 2:\n            data.shadow.css({\n              width: pageWidth,\n              height: height,\n              top: 0,\n              left: 0\n            });\n            break;\n          case 3:\n            data.shadow.css({\n              width: width,\n              height: height,\n              top: 0,\n              left: 0\n            });\n            break;\n        }\n      },\n\n      // Sets the z-index and display property of a page\n      // It depends on the current view\n\n      _setPageLoc: function(page) {\n        var data = this.data(),\n          view = this.turn(\"view\"),\n          loc = 0;\n\n        if (page == view[0] || page == view[1]) loc = 1;\n        else if (\n          (data.display == \"single\" && page == view[0] + 1) ||\n          (data.display == \"double\" && page == view[0] - 2) ||\n            page == view[1] + 2\n        )\n          loc = 2;\n\n        if (!this.turn(\"animating\"))\n          switch (loc) {\n            case 1:\n              data.pageWrap[page].css({\n                zIndex: data.totalPages,\n                display: \"\"\n              });\n              break;\n            case 2:\n              data.pageWrap[page].css({\n                zIndex: data.totalPages - 1,\n                display: \"\"\n              });\n              break;\n            case 0:\n              data.pageWrap[page].css({\n                zIndex: 0,\n                display: data.pageObjs[page].hasClass(\"fixed\") ? \"\" : \"none\"\n              });\n              break;\n          }\n\n        return loc;\n      },\n\n      // Gets and sets the options\n\n      options: function(options) {\n        if (options === undefined) {\n          return this.data().opts;\n        } else {\n          var data = this.data();\n\n          // Set new values\n\n          $.extend(data.opts, options);\n\n          // Set pages\n\n          if (options.pages) this.turn(\"pages\", options.pages);\n\n          // Set page\n\n          if (options.page) this.turn(\"page\", options.page);\n\n          // Set display\n\n          if (options.display) this.turn(\"display\", options.display);\n\n          // Set direction\n\n          if (options.direction) this.turn(\"direction\", options.direction);\n\n          // Set size\n\n          if (options.width && options.height)\n            this.turn(\"size\", options.width, options.height);\n\n          // Add event listeners\n\n          if (options.when)\n            for (var eventName in options.when)\n              if (has(eventName, options.when)) {\n                this.unbind(eventName).bind(eventName, options.when[eventName]);\n              }\n\n          return this;\n        }\n      },\n\n      // Gets the current version\n\n      version: function() {\n        return version;\n      }\n    },\n    // Methods and properties for the flip page effect\n\n    flipMethods = {\n      // Constructor\n\n      init: function(opts) {\n        this.data({\n          f: {\n            disabled: false,\n            hover: false,\n            effect: this.hasClass(\"hard\") ? \"hard\" : \"sheet\"\n          }\n        });\n\n        this.flip(\"options\", opts);\n\n        flipMethods._addPageWrapper.call(this);\n\n        return this;\n      },\n\n      setData: function(d) {\n        var data = this.data();\n\n        data.f = $.extend(data.f, d);\n\n        return this;\n      },\n\n      options: function(opts) {\n        var data = this.data().f;\n\n        if (opts) {\n          flipMethods.setData.call(this, {\n            opts: $.extend({}, data.opts || flipOptions, opts)\n          });\n          return this;\n        } else return data.opts;\n      },\n\n      z: function(z) {\n        var data = this.data().f;\n\n        data.opts[\"z-index\"] = z;\n\n        if (data.fwrapper)\n          data.fwrapper.css({\n            zIndex: z || parseInt(data.parent.css(\"z-index\"), 10) || 0\n          });\n\n        return this;\n      },\n\n      _cAllowed: function() {\n        var data = this.data().f,\n          page = data.opts.page,\n          turnData = data.opts.turn.data(),\n          odd = page % 2;\n\n        if (data.effect == \"hard\") {\n          return turnData.direction == \"ltr\"\n            ? [odd ? \"r\" : \"l\"]\n            : [odd ? \"l\" : \"r\"];\n        } else {\n          if (turnData.display == \"single\") {\n            if (page == 1)\n              return turnData.direction == \"ltr\"\n                ? corners[\"forward\"]\n                : corners[\"backward\"];\n            else if (page == turnData.totalPages)\n              return turnData.direction == \"ltr\"\n                ? corners[\"backward\"]\n                : corners[\"forward\"];\n            else return corners[\"all\"];\n          } else {\n            return turnData.direction == \"ltr\"\n              ? corners[odd ? \"forward\" : \"backward\"]\n              : corners[odd ? \"backward\" : \"forward\"];\n          }\n        }\n      },\n\n      _cornerActivated: function(p) {\n        var data = this.data().f,\n          width = this.width(),\n          height = this.height(),\n          point = { x: p.x, y: p.y, corner: \"\" },\n          csz = data.opts.cornerSize;\n\n        if (\n          point.x <= 0 ||\n          point.y <= 0 ||\n          point.x >= width ||\n          point.y >= height\n        )\n          return false;\n\n        var allowedCorners = flipMethods._cAllowed.call(this);\n\n        switch (data.effect) {\n          case \"hard\":\n            if (point.x > width - csz) point.corner = \"r\";\n            else if (point.x < csz) point.corner = \"l\";\n            else return false;\n\n            break;\n\n          case \"sheet\":\n            if (point.y < csz) point.corner += \"t\";\n            else if (point.y >= height - csz) point.corner += \"b\";\n            else return false;\n\n            if (point.x <= csz) point.corner += \"l\";\n            else if (point.x >= width - csz) point.corner += \"r\";\n            else return false;\n\n            break;\n        }\n\n        return !point.corner || $.inArray(point.corner, allowedCorners) == -1\n          ? false\n          : point;\n      },\n\n      _isIArea: function(e) {\n        var pos = this.data().f.parent.offset();\n\n        e = isTouch && e.originalEvent ? e.originalEvent.touches[0] : e;\n\n        return flipMethods._cornerActivated.call(this, {\n          x: e.pageX - pos.left,\n          y: e.pageY - pos.top\n        });\n      },\n\n      _c: function(corner, opts) {\n        opts = opts || 0;\n\n        switch (corner) {\n          case \"tl\":\n            return point2D(opts, opts);\n          case \"tr\":\n            return point2D(this.width() - opts, opts);\n          case \"bl\":\n            return point2D(opts, this.height() - opts);\n          case \"br\":\n            return point2D(this.width() - opts, this.height() - opts);\n          case \"l\":\n            return point2D(opts, 0);\n          case \"r\":\n            return point2D(this.width() - opts, 0);\n        }\n      },\n\n      _c2: function(corner) {\n        switch (corner) {\n          case \"tl\":\n            return point2D(this.width() * 2, 0);\n          case \"tr\":\n            return point2D(-this.width(), 0);\n          case \"bl\":\n            return point2D(this.width() * 2, this.height());\n          case \"br\":\n            return point2D(-this.width(), this.height());\n          case \"l\":\n            return point2D(this.width() * 2, 0);\n          case \"r\":\n            return point2D(-this.width(), 0);\n        }\n      },\n\n      _foldingPage: function() {\n        var data = this.data().f;\n\n        if (!data) return;\n\n        var opts = data.opts;\n\n        if (opts.turn) {\n          data = opts.turn.data();\n          if (data.display == \"single\")\n            return opts.next > 1 || opts.page > 1 ? data.pageObjs[0] : null;\n          else return data.pageObjs[opts.next];\n        }\n      },\n\n      _backGradient: function() {\n        var data = this.data().f,\n          turnData = data.opts.turn.data(),\n          gradient =\n            turnData.opts.gradients &&\n            (turnData.display == \"single\" ||\n              (data.opts.page != 2 &&\n                data.opts.page != turnData.totalPages - 1));\n\n        if (gradient && !data.bshadow)\n          data.bshadow = $(\"<div/>\", divAtt(0, 0, 1))\n            .css({ position: \"\", width: this.width(), height: this.height() })\n            .appendTo(data.parent);\n\n        return gradient;\n      },\n\n      type: function() {\n        return this.data().f.effect;\n      },\n\n      resize: function(full) {\n        var data = this.data().f,\n          turnData = data.opts.turn.data(),\n          width = this.width(),\n          height = this.height();\n\n        switch (data.effect) {\n          case \"hard\":\n            if (full) {\n              data.wrapper.css({ width: width, height: height });\n              data.fpage.css({ width: width, height: height });\n              if (turnData.opts.gradients) {\n                data.ashadow.css({ width: width, height: height });\n                data.bshadow.css({ width: width, height: height });\n              }\n            }\n\n            break;\n          case \"sheet\":\n            if (full) {\n              var size = Math.round(\n                Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2))\n              );\n\n              data.wrapper.css({ width: size, height: size });\n              data.fwrapper\n                .css({ width: size, height: size })\n                .children(\":first-child\")\n                .css({ width: width, height: height });\n\n              data.fpage.css({ width: width, height: height });\n\n              if (turnData.opts.gradients)\n                data.ashadow.css({ width: width, height: height });\n\n              if (flipMethods._backGradient.call(this))\n                data.bshadow.css({ width: width, height: height });\n            }\n\n            if (data.parent.is(\":visible\")) {\n              var offset = findPos(data.parent[0]);\n\n              data.fwrapper.css({\n                top: offset.top,\n                left: offset.left\n              });\n\n              //if (data.opts.turn) {\n              offset = findPos(data.opts.turn[0]);\n              data.fparent.css({ top: -offset.top, left: -offset.left });\n              //}\n            }\n\n            this.flip(\"z\", data.opts[\"z-index\"]);\n\n            break;\n        }\n      },\n\n      // Prepares the page by adding a general wrapper and another objects\n\n      _addPageWrapper: function() {\n        var att,\n          data = this.data().f,\n          turnData = data.opts.turn.data(),\n          parent = this.parent();\n\n        data.parent = parent;\n\n        if (!data.wrapper)\n          switch (data.effect) {\n            case \"hard\":\n              var cssProperties = {};\n              cssProperties[vendor + \"transform-style\"] = \"preserve-3d\";\n              cssProperties[vendor + \"backface-visibility\"] = \"hidden\";\n\n              data.wrapper = $(\"<div/>\", divAtt(0, 0, 2))\n                .css(cssProperties)\n                .appendTo(parent)\n                .prepend(this);\n\n              data.fpage = $(\"<div/>\", divAtt(0, 0, 1))\n                .css(cssProperties)\n                .appendTo(parent);\n\n              if (turnData.opts.gradients) {\n                data.ashadow = $(\"<div/>\", divAtt(0, 0, 0))\n                  .hide()\n                  .appendTo(parent);\n\n                data.bshadow = $(\"<div/>\", divAtt(0, 0, 0));\n              }\n\n              break;\n            case \"sheet\":\n              var width = this.width(),\n                height = this.height(),\n                size = Math.round(\n                  Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2))\n                );\n\n              data.fparent = data.opts.turn.data().fparent;\n\n              if (!data.fparent) {\n                var fparent = $(\"<div/>\", {\n                  css: { \"pointer-events\": \"none\" }\n                }).hide();\n                fparent.data().flips = 0;\n                fparent\n                  .css(divAtt(0, 0, \"auto\", \"visible\").css)\n                  .appendTo(data.opts.turn);\n\n                data.opts.turn.data().fparent = fparent;\n                data.fparent = fparent;\n              }\n\n              this.css({\n                position: \"absolute\",\n                top: 0,\n                left: 0,\n                bottom: \"auto\",\n                right: \"auto\"\n              });\n\n              data.wrapper = $(\"<div/>\", divAtt(0, 0, this.css(\"z-index\")))\n                .appendTo(parent)\n                .prepend(this);\n\n              data.fwrapper = $(\n                \"<div/>\",\n                divAtt(parent.offset().top, parent.offset().left)\n              )\n                .hide()\n                .appendTo(data.fparent);\n\n              data.fpage = $(\"<div/>\", divAtt(0, 0, 0, \"visible\"))\n                .css({ cursor: \"default\" })\n                .appendTo(data.fwrapper);\n\n              if (turnData.opts.gradients)\n                data.ashadow = $(\"<div/>\", divAtt(0, 0, 1)).appendTo(\n                  data.fpage\n                );\n\n              flipMethods.setData.call(this, data);\n\n              break;\n          }\n\n        // Set size\n        flipMethods.resize.call(this, true);\n      },\n\n      // Takes a 2P point from the screen and applies the transformation\n\n      _fold: function(point) {\n        var data = this.data().f,\n          turnData = data.opts.turn.data(),\n          o = flipMethods._c.call(this, point.corner),\n          width = this.width(),\n          height = this.height();\n\n        switch (data.effect) {\n          case \"hard\":\n            if (point.corner == \"l\")\n              point.x = Math.min(Math.max(point.x, 0), width * 2);\n            else point.x = Math.max(Math.min(point.x, width), -width);\n\n            var leftPos,\n              shadow,\n              gradientX,\n              fpageOrigin,\n              parentOrigin,\n              totalPages = turnData.totalPages,\n              zIndex = data.opts[\"z-index\"] || totalPages,\n              parentCss = { overflow: \"visible\" },\n              relX = o.x ? (o.x - point.x) / width : point.x / width,\n              angle = relX * 90,\n              half = angle < 90;\n\n            switch (point.corner) {\n              case \"l\":\n                fpageOrigin = \"0% 50%\";\n                parentOrigin = \"100% 50%\";\n\n                if (half) {\n                  leftPos = 0;\n                  shadow = data.opts.next - 1 > 0;\n                  gradientX = 1;\n                } else {\n                  leftPos = \"100%\";\n                  shadow = data.opts.page + 1 < totalPages;\n                  gradientX = 0;\n                }\n\n                break;\n              case \"r\":\n                fpageOrigin = \"100% 50%\";\n                parentOrigin = \"0% 50%\";\n                angle = -angle;\n                width = -width;\n\n                if (half) {\n                  leftPos = 0;\n                  shadow = data.opts.next + 1 < totalPages;\n                  gradientX = 0;\n                } else {\n                  leftPos = \"-100%\";\n                  shadow = data.opts.page != 1;\n                  gradientX = 1;\n                }\n\n                break;\n            }\n\n            parentCss[vendor + \"perspective-origin\"] = parentOrigin;\n\n            data.wrapper.transform(\n              \"rotateY(\" +\n                angle +\n                \"deg)\" +\n                \"translate3d(0px, 0px, \" +\n                (this.attr(\"depth\") || 0) +\n                \"px)\",\n              parentOrigin\n            );\n\n            data.fpage.transform(\n              \"translateX(\" + width + \"px) rotateY(\" + (180 + angle) + \"deg)\",\n              fpageOrigin\n            );\n\n            data.parent.css(parentCss);\n\n            if (half) {\n              relX = -relX + 1;\n              data.wrapper.css({ zIndex: zIndex + 1 });\n              data.fpage.css({ zIndex: zIndex });\n            } else {\n              relX = relX - 1;\n              data.wrapper.css({ zIndex: zIndex });\n              data.fpage.css({ zIndex: zIndex + 1 });\n            }\n\n            if (turnData.opts.gradients) {\n              if (shadow)\n                data.ashadow\n                  .css({\n                    display: \"\",\n                    left: leftPos,\n                    backgroundColor: \"rgba(0,0,0,\" + 0.5 * relX + \")\"\n                  })\n                  .transform(\"rotateY(0deg)\");\n              else data.ashadow.hide();\n\n              data.bshadow.css({ opacity: -relX + 1 });\n\n              if (half) {\n                if (data.bshadow.parent()[0] != data.wrapper[0]) {\n                  data.bshadow.appendTo(data.wrapper);\n                }\n              } else {\n                if (data.bshadow.parent()[0] != data.fpage[0]) {\n                  data.bshadow.appendTo(data.fpage);\n                }\n              }\n              /*data.bshadow.css({\n                backgroundColor: 'rgba(0,0,0,'+(0.1)+')'\n              })*/\n              gradient(\n                data.bshadow,\n                point2D(gradientX * 100, 0),\n                point2D((-gradientX + 1) * 100, 0),\n                [\n                  [0, \"rgba(0,0,0,0.3)\"],\n                  [1, \"rgba(0,0,0,0)\"]\n                ],\n                2\n              );\n            }\n\n            break;\n          case \"sheet\":\n            var that = this,\n              a = 0,\n              alpha = 0,\n              beta,\n              px,\n              gradientEndPointA,\n              gradientEndPointB,\n              gradientStartVal,\n              gradientSize,\n              gradientOpacity,\n              shadowVal,\n              mv = point2D(0, 0),\n              df = point2D(0, 0),\n              tr = point2D(0, 0),\n              folding = flipMethods._foldingPage.call(this),\n              tan = Math.tan(alpha),\n              ac = turnData.opts.acceleration,\n              h = data.wrapper.height(),\n              top = point.corner.substr(0, 1) == \"t\",\n              left = point.corner.substr(1, 1) == \"l\",\n              compute = function() {\n                var rel = point2D(0, 0);\n                var middle = point2D(0, 0);\n\n                rel.x = o.x ? o.x - point.x : point.x;\n\n                if (!hasRot) {\n                  rel.y = 0;\n                } else {\n                  rel.y = o.y ? o.y - point.y : point.y;\n                }\n\n                middle.x = left ? width - rel.x / 2 : point.x + rel.x / 2;\n                middle.y = rel.y / 2;\n\n                var alpha = A90 - Math.atan2(rel.y, rel.x),\n                  gamma = alpha - Math.atan2(middle.y, middle.x),\n                  distance = Math.max(\n                    0,\n                    Math.sin(gamma) *\n                      Math.sqrt(Math.pow(middle.x, 2) + Math.pow(middle.y, 2))\n                  );\n\n                a = deg(alpha);\n\n                tr = point2D(\n                  distance * Math.sin(alpha),\n                  distance * Math.cos(alpha)\n                );\n\n                if (alpha > A90) {\n                  tr.x = tr.x + Math.abs((tr.y * rel.y) / rel.x);\n                  tr.y = 0;\n                  if (Math.round(tr.x * Math.tan(PI - alpha)) < height) {\n                    point.y = Math.sqrt(\n                      Math.pow(height, 2) + 2 * middle.x * rel.x\n                    );\n                    if (top) point.y = height - point.y;\n                    return compute();\n                  }\n                }\n\n                if (alpha > A90) {\n                  var beta = PI - alpha,\n                    dd = h - height / Math.sin(beta);\n                  mv = point2D(\n                    Math.round(dd * Math.cos(beta)),\n                    Math.round(dd * Math.sin(beta))\n                  );\n                  if (left) mv.x = -mv.x;\n                  if (top) mv.y = -mv.y;\n                }\n\n                px = Math.round(tr.y / Math.tan(alpha) + tr.x);\n\n                var side = width - px,\n                  sideX = side * Math.cos(alpha * 2),\n                  sideY = side * Math.sin(alpha * 2);\n                df = point2D(\n                  Math.round(left ? side - sideX : px + sideX),\n                  Math.round(top ? sideY : height - sideY)\n                );\n\n                // Gradients\n                if (turnData.opts.gradients) {\n                  gradientSize = side * Math.sin(alpha);\n\n                  var endingPoint = flipMethods._c2.call(that, point.corner),\n                    far =\n                      Math.sqrt(\n                        Math.pow(endingPoint.x - point.x, 2) +\n                          Math.pow(endingPoint.y - point.y, 2)\n                      ) / width;\n\n                  shadowVal = Math.sin(A90 * (far > 1 ? 2 - far : far));\n\n                  gradientOpacity = Math.min(far, 1);\n\n                  gradientStartVal =\n                    gradientSize > 100\n                      ? (gradientSize - 100) / gradientSize\n                      : 0;\n\n                  gradientEndPointA = point2D(\n                    ((gradientSize * Math.sin(alpha)) / width) * 100,\n                    ((gradientSize * Math.cos(alpha)) / height) * 100\n                  );\n\n                  if (flipMethods._backGradient.call(that)) {\n                    gradientEndPointB = point2D(\n                      ((gradientSize * 1.2 * Math.sin(alpha)) / width) * 100,\n                      ((gradientSize * 1.2 * Math.cos(alpha)) / height) * 100\n                    );\n\n                    if (!left) gradientEndPointB.x = 100 - gradientEndPointB.x;\n                    if (!top) gradientEndPointB.y = 100 - gradientEndPointB.y;\n                  }\n                }\n\n                tr.x = Math.round(tr.x);\n                tr.y = Math.round(tr.y);\n\n                return true;\n              },\n              transform = function(tr, c, x, a) {\n                var f = [\"0\", \"auto\"],\n                  mvW = ((width - h) * x[0]) / 100,\n                  mvH = ((height - h) * x[1]) / 100,\n                  cssA = {\n                    left: f[c[0]],\n                    top: f[c[1]],\n                    right: f[c[2]],\n                    bottom: f[c[3]]\n                  },\n                  cssB = {},\n                  aliasingFk = a != 90 && a != -90 ? (left ? -1 : 1) : 0,\n                  origin = x[0] + \"% \" + x[1] + \"%\";\n\n                that\n                  .css(cssA)\n                  .transform(\n                    rotate(a) + translate(tr.x + aliasingFk, tr.y, ac),\n                    origin\n                  );\n\n                data.fpage\n                  .css(cssA)\n                  .transform(\n                    rotate(a) +\n                      translate(\n                        tr.x + df.x - mv.x - (width * x[0]) / 100,\n                        tr.y + df.y - mv.y - (height * x[1]) / 100,\n                        ac\n                      ) +\n                      rotate((180 / a - 2) * a),\n                    origin\n                  );\n\n                data.wrapper.transform(\n                  translate(-tr.x + mvW - aliasingFk, -tr.y + mvH, ac) +\n                    rotate(-a),\n                  origin\n                );\n\n                data.fwrapper.transform(\n                  translate(-tr.x + mv.x + mvW, -tr.y + mv.y + mvH, ac) +\n                    rotate(-a),\n                  origin\n                );\n\n                if (turnData.opts.gradients) {\n                  if (x[0]) gradientEndPointA.x = 100 - gradientEndPointA.x;\n\n                  if (x[1]) gradientEndPointA.y = 100 - gradientEndPointA.y;\n\n                  cssB[\"box-shadow\"] =\n                    \"0 0 20px rgba(0,0,0,\" + 0.5 * shadowVal + \")\";\n                  folding.css(cssB);\n\n                  gradient(\n                    data.ashadow,\n                    point2D(left ? 100 : 0, top ? 0 : 100),\n                    point2D(gradientEndPointA.x, gradientEndPointA.y),\n                    [\n                      [gradientStartVal, \"rgba(0,0,0,0)\"],\n                      [\n                        (1 - gradientStartVal) * 0.8 + gradientStartVal,\n                        \"rgba(0,0,0,\" + 0.2 * gradientOpacity + \")\"\n                      ],\n                      [1, \"rgba(255,255,255,\" + 0.2 * gradientOpacity + \")\"]\n                    ],\n                    3,\n                    alpha\n                  );\n\n                  if (flipMethods._backGradient.call(that))\n                    gradient(\n                      data.bshadow,\n                      point2D(left ? 0 : 100, top ? 0 : 100),\n                      point2D(gradientEndPointB.x, gradientEndPointB.y),\n                      [\n                        [0.6, \"rgba(0,0,0,0)\"],\n                        [0.8, \"rgba(0,0,0,\" + 0.3 * gradientOpacity + \")\"],\n                        [1, \"rgba(0,0,0,0)\"]\n                      ],\n                      3\n                    );\n                }\n              };\n\n            switch (point.corner) {\n              case \"l\":\n                break;\n              case \"r\":\n                break;\n              case \"tl\":\n                point.x = Math.max(point.x, 1);\n                compute();\n                transform(tr, [1, 0, 0, 1], [100, 0], a);\n                break;\n              case \"tr\":\n                point.x = Math.min(point.x, width - 1);\n                compute();\n                transform(point2D(-tr.x, tr.y), [0, 0, 0, 1], [0, 0], -a);\n                break;\n              case \"bl\":\n                point.x = Math.max(point.x, 1);\n                compute();\n                transform(point2D(tr.x, -tr.y), [1, 1, 0, 0], [100, 100], -a);\n                break;\n              case \"br\":\n                point.x = Math.min(point.x, width - 1);\n                compute();\n                transform(point2D(-tr.x, -tr.y), [0, 1, 1, 0], [0, 100], a);\n                break;\n            }\n\n            break;\n        }\n\n        data.point = point;\n      },\n\n      _moveFoldingPage: function(move) {\n        var data = this.data().f;\n\n        if (!data) return;\n\n        var turn = data.opts.turn,\n          turnData = turn.data(),\n          place = turnData.pagePlace;\n\n        if (move) {\n          var nextPage = data.opts.next;\n\n          if (place[nextPage] != data.opts.page) {\n            if (data.folding) flipMethods._moveFoldingPage.call(this, false);\n\n            var folding = flipMethods._foldingPage.call(this);\n\n            folding.appendTo(data.fpage);\n            place[nextPage] = data.opts.page;\n            data.folding = nextPage;\n          }\n\n          turn.turn(\"update\");\n        } else {\n          if (data.folding) {\n            if (turnData.pages[data.folding]) {\n              // If we have flip available\n\n              var flipData = turnData.pages[data.folding].data().f;\n\n              turnData.pageObjs[data.folding].appendTo(flipData.wrapper);\n            } else if (turnData.pageWrap[data.folding]) {\n              // If we have the pageWrapper\n\n              turnData.pageObjs[data.folding].appendTo(\n                turnData.pageWrap[data.folding]\n              );\n            }\n\n            if (data.folding in place) {\n              place[data.folding] = data.folding;\n            }\n\n            delete data.folding;\n          }\n        }\n      },\n\n      _showFoldedPage: function(c, animate) {\n        var folding = flipMethods._foldingPage.call(this),\n          dd = this.data(),\n          data = dd.f,\n          visible = data.visible;\n\n        if (folding) {\n          if (!visible || !data.point || data.point.corner != c.corner) {\n            var corner =\n              data.status == \"hover\" ||\n              data.status == \"peel\" ||\n              data.opts.turn.data().mouseAction\n                ? c.corner\n                : null;\n\n            visible = false;\n\n            if (trigger(\"start\", this, [data.opts, corner]) == \"prevented\")\n              return false;\n          }\n\n          if (animate) {\n            var that = this,\n              point =\n                data.point && data.point.corner == c.corner\n                  ? data.point\n                  : flipMethods._c.call(this, c.corner, 1);\n\n            this.animatef({\n              from: [point.x, point.y],\n              to: [c.x, c.y],\n              duration: 500,\n              frame: function(v) {\n                c.x = Math.round(v[0]);\n                c.y = Math.round(v[1]);\n                flipMethods._fold.call(that, c);\n              }\n            });\n          } else {\n            flipMethods._fold.call(this, c);\n\n            if (dd.effect && !dd.effect.turning) this.animatef(false);\n          }\n\n          if (!visible) {\n            switch (data.effect) {\n              case \"hard\":\n                data.visible = true;\n                flipMethods._moveFoldingPage.call(this, true);\n                data.fpage.show();\n                if (data.opts.shadows) data.bshadow.show();\n\n                break;\n              case \"sheet\":\n                data.visible = true;\n                data.fparent.show().data().flips++;\n                flipMethods._moveFoldingPage.call(this, true);\n                data.fwrapper.show();\n                if (data.bshadow) data.bshadow.show();\n\n                break;\n            }\n          }\n\n          return true;\n        }\n\n        return false;\n      },\n\n      hide: function() {\n        var data = this.data().f,\n          turnData = data.opts.turn.data(),\n          folding = flipMethods._foldingPage.call(this);\n\n        switch (data.effect) {\n          case \"hard\":\n            if (turnData.opts.gradients) {\n              data.bshadowLoc = 0;\n              data.bshadow.remove();\n              data.ashadow.hide();\n            }\n\n            data.wrapper.transform(\"\");\n            data.fpage.hide();\n\n            break;\n          case \"sheet\":\n            if (--data.fparent.data().flips === 0) data.fparent.hide();\n\n            this.css({\n              left: 0,\n              top: 0,\n              right: \"auto\",\n              bottom: \"auto\"\n            }).transform(\"\");\n\n            data.wrapper.transform(\"\");\n\n            data.fwrapper.hide();\n\n            if (data.bshadow) data.bshadow.hide();\n\n            folding.transform(\"\");\n\n            break;\n        }\n\n        data.visible = false;\n\n        return this;\n      },\n\n      hideFoldedPage: function(animate) {\n        var data = this.data().f;\n\n        if (!data.point) return;\n\n        var that = this,\n          p1 = data.point,\n          hide = function() {\n            data.point = null;\n            data.status = \"\";\n            that.flip(\"hide\");\n            that.trigger(\"end\", [data.opts, false]);\n          };\n\n        if (animate) {\n          var p4 = flipMethods._c.call(this, p1.corner),\n            top = p1.corner.substr(0, 1) == \"t\",\n            delta = top\n              ? Math.min(0, p1.y - p4.y) / 2\n              : Math.max(0, p1.y - p4.y) / 2,\n            p2 = point2D(p1.x, p1.y + delta),\n            p3 = point2D(p4.x, p4.y - delta);\n\n          this.animatef({\n            from: 0,\n            to: 1,\n            frame: function(v) {\n              var np = bezier(p1, p2, p3, p4, v);\n              p1.x = np.x;\n              p1.y = np.y;\n              flipMethods._fold.call(that, p1);\n            },\n            complete: hide,\n            duration: 800,\n            hiding: true\n          });\n        } else {\n          this.animatef(false);\n          hide();\n        }\n      },\n\n      turnPage: function(corner) {\n        var that = this,\n          data = this.data().f,\n          turnData = data.opts.turn.data();\n\n        corner = {\n          corner: data.corner\n            ? data.corner.corner\n            : corner || flipMethods._cAllowed.call(this)[0]\n        };\n\n        var p1 =\n            data.point ||\n            flipMethods._c.call(\n              this,\n              corner.corner,\n              data.opts.turn ? turnData.opts.elevation : 0\n            ),\n          p4 = flipMethods._c2.call(this, corner.corner);\n\n        this.trigger(\"flip\").animatef({\n          from: 0,\n          to: 1,\n          frame: function(v) {\n            var np = bezier(p1, p1, p4, p4, v);\n            corner.x = np.x;\n            corner.y = np.y;\n            flipMethods._showFoldedPage.call(that, corner);\n          },\n          complete: function() {\n            that.trigger(\"end\", [data.opts, true]);\n          },\n          duration: turnData.opts.duration,\n          turning: true\n        });\n\n        data.corner = null;\n      },\n\n      moving: function() {\n        return \"effect\" in this.data();\n      },\n\n      isTurning: function() {\n        return this.flip(\"moving\") && this.data().effect.turning;\n      },\n\n      corner: function() {\n        return this.data().f.corner;\n      },\n\n      _eventStart: function(e) {\n        var data = this.data().f,\n          turn = data.opts.turn;\n\n        if (\n          !data.corner &&\n          !data.disabled &&\n          !this.flip(\"isTurning\") &&\n          data.opts.page == turn.data().pagePlace[data.opts.page]\n        ) {\n          data.corner = flipMethods._isIArea.call(this, e);\n\n          if (data.corner && flipMethods._foldingPage.call(this)) {\n            this.trigger(\"pressed\", [data.point]);\n            flipMethods._showFoldedPage.call(this, data.corner);\n\n            return false;\n          } else data.corner = null;\n        }\n      },\n\n      _eventMove: function(e) {\n        var data = this.data().f;\n\n        if (!data.disabled) {\n          e = isTouch ? e.originalEvent.touches : [e];\n\n          if (data.corner) {\n            var pos = data.parent.offset();\n            data.corner.x = e[0].pageX - pos.left;\n            data.corner.y = e[0].pageY - pos.top;\n            flipMethods._showFoldedPage.call(this, data.corner);\n          } else if (data.hover && !this.data().effect && this.is(\":visible\")) {\n            var point = flipMethods._isIArea.call(this, e[0]);\n\n            if (point) {\n              if (\n                (data.effect == \"sheet\" && point.corner.length == 2) ||\n                data.effect == \"hard\"\n              ) {\n                data.status = \"hover\";\n                var origin = flipMethods._c.call(\n                  this,\n                  point.corner,\n                  data.opts.cornerSize / 2\n                );\n                point.x = origin.x;\n                point.y = origin.y;\n                flipMethods._showFoldedPage.call(this, point, true);\n              }\n            } else {\n              if (data.status == \"hover\") {\n                data.status = \"\";\n                flipMethods.hideFoldedPage.call(this, true);\n              }\n            }\n          }\n        }\n      },\n\n      _eventEnd: function() {\n        var data = this.data().f,\n          corner = data.corner;\n\n        if (!data.disabled && corner) {\n          if (\n            trigger(\"released\", this, [data.point || corner]) != \"prevented\"\n          ) {\n            flipMethods.hideFoldedPage.call(this, true);\n          }\n        }\n\n        data.corner = null;\n      },\n\n      disable: function(disable) {\n        flipMethods.setData.call(this, { disabled: disable });\n        return this;\n      },\n\n      hover: function(hover) {\n        flipMethods.setData.call(this, { hover: hover });\n        return this;\n      },\n\n      peel: function(corner, animate) {\n        var data = this.data().f;\n\n        if (corner) {\n          if ($.inArray(corner, corners.all) == -1)\n            throw turnError(\"Corner \" + corner + \" is not permitted\");\n\n          if ($.inArray(corner, flipMethods._cAllowed.call(this)) != -1) {\n            var point = flipMethods._c.call(\n              this,\n              corner,\n              data.opts.cornerSize / 2\n            );\n\n            data.status = \"peel\";\n\n            flipMethods._showFoldedPage.call(\n              this,\n              {\n                corner: corner,\n                x: point.x,\n                y: point.y\n              },\n              animate\n            );\n          }\n        } else {\n          data.status = \"\";\n\n          flipMethods.hideFoldedPage.call(this, animate);\n        }\n\n        return this;\n      }\n    };\n\n  // Processes classes\n\n  function dec(that, methods, args) {\n    if (!args[0] || typeof args[0] == \"object\")\n      return methods.init.apply(that, args);\n    else if (methods[args[0]])\n      return methods[args[0]].apply(that, Array.prototype.slice.call(args, 1));\n    else throw turnError(args[0] + \" is not a method or property\");\n  }\n\n  // Attributes for a layer\n\n  function divAtt(top, left, zIndex, overf) {\n    return {\n      css: {\n        position: \"absolute\",\n        top: top,\n        left: left,\n        overflow: overf || \"hidden\",\n        zIndex: zIndex || \"auto\"\n      }\n    };\n  }\n\n  // Gets a 2D point from a bezier curve of four points\n\n  function bezier(p1, p2, p3, p4, t) {\n    var a = 1 - t,\n      b = a * a * a,\n      c = t * t * t;\n\n    return point2D(\n      Math.round(\n        b * p1.x + 3 * t * a * a * p2.x + 3 * t * t * a * p3.x + c * p4.x\n      ),\n      Math.round(\n        b * p1.y + 3 * t * a * a * p2.y + 3 * t * t * a * p3.y + c * p4.y\n      )\n    );\n  }\n\n  // Converts an angle from degrees to radians\n\n  function rad(degrees) {\n    return (degrees / 180) * PI;\n  }\n\n  // Converts an angle from radians to degrees\n\n  function deg(radians) {\n    return (radians / PI) * 180;\n  }\n\n  // Gets a 2D point\n\n  function point2D(x, y) {\n    return { x: x, y: y };\n  }\n\n  // Webkit 534.3 on Android wrongly repaints elements that use overflow:hidden + rotation\n\n  function rotationAvailable() {\n    var parts;\n\n    if ((parts = /AppleWebkit\\/([0-9\\.]+)/i.exec(navigator.userAgent))) {\n      var webkitVersion = parseFloat(parts[1]);\n      return webkitVersion > 534.3;\n    } else {\n      return true;\n    }\n  }\n\n  // Returns the traslate value\n\n  function translate(x, y, use3d) {\n    return has3d && use3d\n      ? \" translate3d(\" + x + \"px,\" + y + \"px, 0px) \"\n      : \" translate(\" + x + \"px, \" + y + \"px) \";\n  }\n\n  // Returns the rotation value\n\n  function rotate(degrees) {\n    return \" rotate(\" + degrees + \"deg) \";\n  }\n\n  // Checks if a property belongs to an object\n\n  function has(property, object) {\n    return Object.prototype.hasOwnProperty.call(object, property);\n  }\n\n  // Gets the CSS3 vendor prefix\n\n  function getPrefix() {\n    var vendorPrefixes = [\"Moz\", \"Webkit\", \"Khtml\", \"O\", \"ms\"],\n      len = vendorPrefixes.length,\n      vendor = \"\";\n\n    while (len--)\n      if (vendorPrefixes[len] + \"Transform\" in document.body.style)\n        vendor = \"-\" + vendorPrefixes[len].toLowerCase() + \"-\";\n\n    return vendor;\n  }\n\n  // Detects the transitionEnd Event\n\n  function getTransitionEnd() {\n    var t,\n      el = document.createElement(\"fakeelement\"),\n      transitions = {\n        transition: \"transitionend\",\n        OTransition: \"oTransitionEnd\",\n        MSTransition: \"transitionend\",\n        MozTransition: \"transitionend\",\n        WebkitTransition: \"webkitTransitionEnd\"\n      };\n\n    for (t in transitions) {\n      if (el.style[t] !== undefined) {\n        return transitions[t];\n      }\n    }\n  }\n\n  // Gradients\n\n  function gradient(obj, p0, p1, colors, numColors) {\n    var j,\n      cols = [];\n\n    if (vendor == \"-webkit-\") {\n      for (j = 0; j < numColors; j++)\n        cols.push(\"color-stop(\" + colors[j][0] + \", \" + colors[j][1] + \")\");\n\n      obj.css({\n        \"background-image\":\n          \"-webkit-gradient(linear, \" +\n          p0.x +\n          \"% \" +\n          p0.y +\n          \"%,\" +\n          p1.x +\n          \"% \" +\n          p1.y +\n          \"%, \" +\n          cols.join(\",\") +\n          \" )\"\n      });\n    } else {\n      p0 = { x: (p0.x / 100) * obj.width(), y: (p0.y / 100) * obj.height() };\n      p1 = { x: (p1.x / 100) * obj.width(), y: (p1.y / 100) * obj.height() };\n\n      var dx = p1.x - p0.x,\n        dy = p1.y - p0.y,\n        angle = Math.atan2(dy, dx),\n        angle2 = angle - Math.PI / 2,\n        diagonal =\n          Math.abs(obj.width() * Math.sin(angle2)) +\n          Math.abs(obj.height() * Math.cos(angle2)),\n        gradientDiagonal = Math.sqrt(dy * dy + dx * dx),\n        corner = point2D(\n          p1.x < p0.x ? obj.width() : 0,\n          p1.y < p0.y ? obj.height() : 0\n        ),\n        slope = Math.tan(angle),\n        inverse = -1 / slope,\n        x =\n          (inverse * corner.x - corner.y - slope * p0.x + p0.y) /\n          (inverse - slope),\n        c = { x: x, y: inverse * x - inverse * corner.x + corner.y },\n        segA = Math.sqrt(Math.pow(c.x - p0.x, 2) + Math.pow(c.y - p0.y, 2));\n\n      for (j = 0; j < numColors; j++)\n        cols.push(\n          \" \" +\n            colors[j][1] +\n            \" \" +\n            ((segA + gradientDiagonal * colors[j][0]) * 100) / diagonal +\n            \"%\"\n        );\n\n      obj.css({\n        \"background-image\":\n          vendor + \"linear-gradient(\" + -angle + \"rad,\" + cols.join(\",\") + \")\"\n      });\n    }\n  }\n\n  // Triggers an event\n\n  function trigger(eventName, context, args) {\n    var event = $.Event(eventName);\n    context.trigger(event, args);\n    if (event.isDefaultPrevented()) return \"prevented\";\n    else if (event.isPropagationStopped()) return \"stopped\";\n    else return \"\";\n  }\n\n  // JS Errors\n\n  function turnError(message) {\n    function TurnJsError(message) {\n      this.name = \"TurnJsError\";\n      this.message = message;\n    }\n\n    TurnJsError.prototype = new Error();\n    TurnJsError.prototype.constructor = TurnJsError;\n    return new TurnJsError(message);\n  }\n\n  // Find the offset of an element ignoring its transformation\n\n  function findPos(obj) {\n    var offset = { top: 0, left: 0 };\n\n    do {\n      offset.left += obj.offsetLeft;\n      offset.top += obj.offsetTop;\n    } while ((obj = obj.offsetParent));\n\n    return offset;\n  }\n\n  // Checks if there's hard page compatibility\n  // IE9 is the only browser that does not support hard pages\n\n  function hasHardPage() {\n    return navigator.userAgent.indexOf(\"MSIE 9.0\") == -1;\n  }\n\n  // Request an animation\n\n  window.requestAnim = (function() {\n    return (\n      window.requestAnimationFrame ||\n      window.webkitRequestAnimationFrame ||\n      window.mozRequestAnimationFrame ||\n      window.oRequestAnimationFrame ||\n      window.msRequestAnimationFrame ||\n      function(callback) {\n        window.setTimeout(callback, 1000 / 60);\n      }\n    );\n  })();\n\n  // Extend $.fn\n\n  $.extend($.fn, {\n    flip: function() {\n      return dec($(this[0]), flipMethods, arguments);\n    },\n\n    turn: function() {\n      return dec($(this[0]), turnMethods, arguments);\n    },\n\n    transform: function(transform, origin) {\n      var properties = {};\n\n      if (origin) properties[vendor + \"transform-origin\"] = origin;\n\n      properties[vendor + \"transform\"] = transform;\n\n      return this.css(properties);\n    },\n\n    animatef: function(point) {\n      var data = this.data();\n\n      if (data.effect) data.effect.stop();\n\n      if (point) {\n        if (!point.to.length) point.to = [point.to];\n        if (!point.from.length) point.from = [point.from];\n\n        var diff = [],\n          len = point.to.length,\n          animating = true,\n          that = this,\n          time = new Date().getTime(),\n          frame = function() {\n            if (!data.effect || !animating) return;\n\n            var v = [],\n              timeDiff = Math.min(point.duration, new Date().getTime() - time);\n\n            for (var i = 0; i < len; i++)\n              v.push(\n                data.effect.easing(\n                  1,\n                  timeDiff,\n                  point.from[i],\n                  diff[i],\n                  point.duration\n                )\n              );\n\n            point.frame(len == 1 ? v[0] : v);\n\n            if (timeDiff == point.duration) {\n              delete data[\"effect\"];\n              that.data(data);\n              if (point.complete) point.complete();\n            } else {\n              window.requestAnim(frame);\n            }\n          };\n\n        for (var i = 0; i < len; i++) diff.push(point.to[i] - point.from[i]);\n\n        data.effect = $.extend(\n          {\n            stop: function() {\n              animating = false;\n            },\n            easing: function(x, t, b, c, data) {\n              return c * Math.sqrt(1 - (t = t / data - 1) * t) + b;\n            }\n          },\n          point\n        );\n\n        this.data(data);\n\n        frame();\n      } else {\n        delete data[\"effect\"];\n      }\n    }\n  });\n\n  // Export some globals\n\n  $.isTouch = isTouch;\n  $.mouseEvents = mouseEvents;\n  $.cssPrefix = getPrefix;\n  $.cssTransitionEnd = getTransitionEnd;\n  $.findPos = findPos;\n})(jQuery);\n","import crypto from 'crypto'\n\nlet urlAlphabet =\n  '_-0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'\n\n// We reuse buffers with the same size to avoid memory fragmentations\n// for better performance.\nlet buffers = {}\nlet random = bytes => {\n  let buffer = buffers[bytes]\n  if (!buffer) {\n    // `Buffer.allocUnsafe()` is faster because it doesn’t flush the memory.\n    // Memory flushing is unnecessary since the buffer allocation itself resets\n    // the memory with the new bytes.\n    buffer = Buffer.allocUnsafe(bytes)\n    if (bytes <= 255) buffers[bytes] = buffer\n  }\n  return crypto.randomFillSync(buffer)\n}\n\nlet customRandom = (alphabet, size, getRandom) => {\n  // First, a bitmask is necessary to generate the ID. The bitmask makes bytes\n  // values closer to the alphabet size. The bitmask calculates the closest\n  // `2^31 - 1` number, which exceeds the alphabet size.\n  // For example, the bitmask for the alphabet size 30 is 31 (00011111).\n  let mask = (2 << (31 - Math.clz32((alphabet.length - 1) | 1))) - 1\n  // Though, the bitmask solution is not perfect since the bytes exceeding\n  // the alphabet size are refused. Therefore, to reliably generate the ID,\n  // the random bytes redundancy has to be satisfied.\n\n  // Note: every hardware random generator call is performance expensive,\n  // because the system call for entropy collection takes a lot of time.\n  // So, to avoid additional system calls, extra bytes are requested in advance.\n\n  // Next, a step determines how many random bytes to generate.\n  // The number of random bytes gets decided upon the ID size, mask,\n  // alphabet size, and magic number 1.6 (using 1.6 peaks at performance\n  // according to benchmarks).\n  let step = Math.ceil((1.6 * mask * size) / alphabet.length)\n\n  return () => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      // A compact alternative for `for (var i = 0; i < step; i++)`.\n      let i = step\n      while (i--) {\n        // Adding `|| ''` refuses a random byte that exceeds the alphabet size.\n        id += alphabet[bytes[i] & mask] || ''\n        // `id.length + 1 === size` is a more compact option.\n        if (id.length === +size) return id\n      }\n    }\n  }\n}\n\nlet customAlphabet = (alphabet, size) => customRandom(alphabet, size, random)\n\nlet nanoid = (size = 21) => {\n  let bytes = random(size)\n  let id = ''\n  // A compact alternative for `for (var i = 0; i < step; i++)`.\n  while (size--) {\n    // It is incorrect to use bytes exceeding the alphabet size.\n    // The following mask reduces the random byte in the 0-255 value\n    // range to the 0-63 value range. Therefore, adding hacks, such\n    // as empty string fallback or magic numbers, is unneccessary because\n    // the bitmask trims bytes down to the alphabet size.\n    id += urlAlphabet[bytes[size] & 63]\n  }\n  return id\n}\n\nexport { nanoid, customAlphabet, customRandom, urlAlphabet, random }\n","<script>\nimport $ from \"jquery\";\nimport \"../../lib/turn.js\";\nimport { nanoid } from \"nanoid\";\n\nexport default {\n  name: \"Turn\", // vue component name\n  data() {\n    return {\n      nanoid: nanoid(),\n      componentKey: 0\n    };\n  },\n  props: {\n    options: {\n      type: Object,\n      default: () => {}\n    }\n  },\n  watch: {\n    defaultOptions: {\n      handler(val) {\n        this.forceRerender(val);\n      },\n      deep: true\n    }\n  },\n  computed: {\n    uid() {\n      return `jopa-${this.nanoid}`;\n    },\n    selector() {\n      return `div[data-uid=${this.uid}]`;\n    },\n    defaultOptions() {\n      return {\n        width: 800,\n        height: 600,\n        display: \"double\",\n        duration: 1800,\n        page: 1,\n        when: {\n          turning: (event, page, pageObj) => {\n            this.currentPage = page;\n          },\n          // triggered before turned\n          first: () => {\n            this.first();\n          },\n          // triggered before turned\n          last: () => {\n            this.last();\n          }\n        },\n        ...this.options\n      };\n    }\n  },\n  mounted() {\n    $(this.selector).turn(this.defaultOptions);\n  },\n  methods: {\n    goTo(page) {\n      $(this.selector).turn(\"page\", page);\n    },\n    first() {},\n    last() {},\n    forceRerender(val) {\n      this.nanoid = nanoid();\n      this.componentKey += 1;\n      this.$nextTick(() => $(this.selector).turn(val));\n    }\n  }\n};\n</script>\n\n<template>\n  <div class=\"flip-book\" :key=\"componentKey\" :data-uid=\"this.uid\">\n    <slot> </slot>\n  </div>\n</template>\n\n<style scoped>\n.flip-book {\n  width: 800px;\n  height: 600px;\n  position: relative;\n  margin: 10px;\n}\n</style>\n","function normalizeComponent(template, style, script, scopeId, isFunctionalTemplate, moduleIdentifier /* server only */, shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {\r\n    if (typeof shadowMode !== 'boolean') {\r\n        createInjectorSSR = createInjector;\r\n        createInjector = shadowMode;\r\n        shadowMode = false;\r\n    }\r\n    // Vue.extend constructor export interop.\r\n    const options = typeof script === 'function' ? script.options : script;\r\n    // render functions\r\n    if (template && template.render) {\r\n        options.render = template.render;\r\n        options.staticRenderFns = template.staticRenderFns;\r\n        options._compiled = true;\r\n        // functional template\r\n        if (isFunctionalTemplate) {\r\n            options.functional = true;\r\n        }\r\n    }\r\n    // scopedId\r\n    if (scopeId) {\r\n        options._scopeId = scopeId;\r\n    }\r\n    let hook;\r\n    if (moduleIdentifier) {\r\n        // server build\r\n        hook = function (context) {\r\n            // 2.3 injection\r\n            context =\r\n                context || // cached call\r\n                    (this.$vnode && this.$vnode.ssrContext) || // stateful\r\n                    (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext); // functional\r\n            // 2.2 with runInNewContext: true\r\n            if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\r\n                context = __VUE_SSR_CONTEXT__;\r\n            }\r\n            // inject component styles\r\n            if (style) {\r\n                style.call(this, createInjectorSSR(context));\r\n            }\r\n            // register component module identifier for async chunk inference\r\n            if (context && context._registeredComponents) {\r\n                context._registeredComponents.add(moduleIdentifier);\r\n            }\r\n        };\r\n        // used by ssr in case component is cached and beforeCreate\r\n        // never gets called\r\n        options._ssrRegister = hook;\r\n    }\r\n    else if (style) {\r\n        hook = shadowMode\r\n            ? function (context) {\r\n                style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot));\r\n            }\r\n            : function (context) {\r\n                style.call(this, createInjector(context));\r\n            };\r\n    }\r\n    if (hook) {\r\n        if (options.functional) {\r\n            // register for functional component in vue file\r\n            const originalRender = options.render;\r\n            options.render = function renderWithStyleInjection(h, context) {\r\n                hook.call(context);\r\n                return originalRender(h, context);\r\n            };\r\n        }\r\n        else {\r\n            // inject component registration as beforeCreate hook\r\n            const existing = options.beforeCreate;\r\n            options.beforeCreate = existing ? [].concat(existing, hook) : [hook];\r\n        }\r\n    }\r\n    return script;\r\n}\n\nexport default normalizeComponent;\n//# sourceMappingURL=normalize-component.mjs.map\n","/*!\n * modernizr v3.6.0\n * Build https://modernizr.com/download?-csstransforms3d-csstransitions-preserve3d-addtest-prefixed-teststyles-dontmin\n *\n * Copyright (c)\n *  Faruk Ates\n *  Paul Irish\n *  Alex Sexton\n *  Ryan Seddon\n *  Patrick Kettner\n *  Stu Cox\n *  Richard Herrera\n\n * MIT License\n */\n\n/*\n * Modernizr tests which native CSS3 and HTML5 features are available in the\n * current UA and makes the results available to you in two ways: as properties on\n * a global `Modernizr` object, and as classes on the `<html>` element. This\n * information allows you to progressively enhance your pages with a granular level\n * of control over the experience.\n */\n\n(function(window, document, undefined) {\n  var tests = [];\n\n  /**\n   *\n   * ModernizrProto is the constructor for Modernizr\n   *\n   * @class\n   * @access public\n   */\n\n  var ModernizrProto = {\n    // The current version, dummy\n    _version: \"3.6.0\",\n\n    // Any settings that don't work as separate modules\n    // can go in here as configuration.\n    _config: {\n      classPrefix: \"\",\n      enableClasses: true,\n      enableJSClass: true,\n      usePrefixes: true\n    },\n\n    // Queue of tests\n    _q: [],\n\n    // Stub these for people who are listening\n    on: function(test, cb) {\n      // I don't really think people should do this, but we can\n      // safe guard it a bit.\n      // -- NOTE:: this gets WAY overridden in src/addTest for actual async tests.\n      // This is in case people listen to synchronous tests. I would leave it out,\n      // but the code to *disallow* sync tests in the real version of this\n      // function is actually larger than this.\n      var self = this;\n      setTimeout(function() {\n        cb(self[test]);\n      }, 0);\n    },\n\n    addTest: function(name, fn, options) {\n      tests.push({ name: name, fn: fn, options: options });\n    },\n\n    addAsyncTest: function(fn) {\n      tests.push({ name: null, fn: fn });\n    }\n  };\n\n  // Fake some of Object.create so we can force non test results to be non \"own\" properties.\n  var Modernizr = function() {};\n  Modernizr.prototype = ModernizrProto;\n\n  // Leak modernizr globally when you `require` it rather than force it here.\n  // Overwrite name so constructor name is nicer :D\n  Modernizr = new Modernizr();\n\n  var classes = [];\n\n  /**\n   * is returns a boolean if the typeof an obj is exactly type.\n   *\n   * @access private\n   * @function is\n   * @param {*} obj - A thing we want to check the type of\n   * @param {string} type - A string to compare the typeof against\n   * @returns {boolean}\n   */\n\n  function is(obj, type) {\n    return typeof obj === type;\n  }\n  /**\n   * Run through all tests and detect their support in the current UA.\n   *\n   * @access private\n   */\n\n  function testRunner() {\n    var featureNames;\n    var feature;\n    var aliasIdx;\n    var result;\n    var nameIdx;\n    var featureName;\n    var featureNameSplit;\n\n    for (var featureIdx in tests) {\n      if (tests.hasOwnProperty(featureIdx)) {\n        featureNames = [];\n        feature = tests[featureIdx];\n        // run the test, throw the return value into the Modernizr,\n        // then based on that boolean, define an appropriate className\n        // and push it into an array of classes we'll join later.\n        //\n        // If there is no name, it's an 'async' test that is run,\n        // but not directly added to the object. That should\n        // be done with a post-run addTest call.\n        if (feature.name) {\n          featureNames.push(feature.name.toLowerCase());\n\n          if (\n            feature.options &&\n            feature.options.aliases &&\n            feature.options.aliases.length\n          ) {\n            // Add all the aliases into the names list\n            for (\n              aliasIdx = 0;\n              aliasIdx < feature.options.aliases.length;\n              aliasIdx++\n            ) {\n              featureNames.push(\n                feature.options.aliases[aliasIdx].toLowerCase()\n              );\n            }\n          }\n        }\n\n        // Run the test, or use the raw value if it's not a function\n        result = is(feature.fn, \"function\") ? feature.fn() : feature.fn;\n\n        // Set each of the names on the Modernizr object\n        for (nameIdx = 0; nameIdx < featureNames.length; nameIdx++) {\n          featureName = featureNames[nameIdx];\n          // Support dot properties as sub tests. We don't do checking to make sure\n          // that the implied parent tests have been added. You must call them in\n          // order (either in the test, or make the parent test a dependency).\n          //\n          // Cap it to TWO to make the logic simple and because who needs that kind of subtesting\n          // hashtag famous last words\n          featureNameSplit = featureName.split(\".\");\n\n          if (featureNameSplit.length === 1) {\n            Modernizr[featureNameSplit[0]] = result;\n          } else {\n            // cast to a Boolean, if not one already\n            if (\n              Modernizr[featureNameSplit[0]] &&\n              !(Modernizr[featureNameSplit[0]] instanceof Boolean)\n            ) {\n              Modernizr[featureNameSplit[0]] = new Boolean(\n                Modernizr[featureNameSplit[0]]\n              );\n            }\n\n            Modernizr[featureNameSplit[0]][featureNameSplit[1]] = result;\n          }\n\n          classes.push((result ? \"\" : \"no-\") + featureNameSplit.join(\"-\"));\n        }\n      }\n    }\n  }\n  /**\n   * hasOwnProp is a shim for hasOwnProperty that is needed for Safari 2.0 support\n   *\n   * @author kangax\n   * @access private\n   * @function hasOwnProp\n   * @param {object} object - The object to check for a property\n   * @param {string} property - The property to check for\n   * @returns {boolean}\n   */\n\n  // hasOwnProperty shim by kangax needed for Safari 2.0 support\n  var hasOwnProp;\n\n  (function() {\n    var _hasOwnProperty = {}.hasOwnProperty;\n    /* istanbul ignore else */\n    /* we have no way of testing IE 5.5 or safari 2,\n     * so just assume the else gets hit */\n    if (\n      !is(_hasOwnProperty, \"undefined\") &&\n      !is(_hasOwnProperty.call, \"undefined\")\n    ) {\n      hasOwnProp = function(object, property) {\n        return _hasOwnProperty.call(object, property);\n      };\n    } else {\n      hasOwnProp = function(object, property) {\n        /* yes, this can give false positives/negatives, but most of the time we don't care about those */\n        return (\n          property in object &&\n          is(object.constructor.prototype[property], \"undefined\")\n        );\n      };\n    }\n  })();\n\n  /**\n   * cssToDOM takes a kebab-case string and converts it to camelCase\n   * e.g. box-sizing -> boxSizing\n   *\n   * @access private\n   * @function cssToDOM\n   * @param {string} name - String name of kebab-case prop we want to convert\n   * @returns {string} The camelCase version of the supplied name\n   */\n\n  function cssToDOM(name) {\n    return name\n      .replace(/([a-z])-([a-z])/g, function(str, m1, m2) {\n        return m1 + m2.toUpperCase();\n      })\n      .replace(/^-/, \"\");\n  }\n  /*!\n{\n  \"name\": \"CSS Supports\",\n  \"property\": \"supports\",\n  \"caniuse\": \"css-featurequeries\",\n  \"tags\": [\"css\"],\n  \"builderAliases\": [\"css_supports\"],\n  \"notes\": [{\n    \"name\": \"W3 Spec\",\n    \"href\": \"http://dev.w3.org/csswg/css3-conditional/#at-supports\"\n  },{\n    \"name\": \"Related Github Issue\",\n    \"href\": \"https://github.com/Modernizr/Modernizr/issues/648\"\n  },{\n    \"name\": \"W3 Info\",\n    \"href\": \"http://dev.w3.org/csswg/css3-conditional/#the-csssupportsrule-interface\"\n  }]\n}\n!*/\n\n  var newSyntax = \"CSS\" in window && \"supports\" in window.CSS;\n  var oldSyntax = \"supportsCSS\" in window;\n  Modernizr.addTest(\"supports\", newSyntax || oldSyntax);\n\n  /**\n   * docElement is a convenience wrapper to grab the root element of the document\n   *\n   * @access private\n   * @returns {HTMLElement|SVGElement} The root element of the document\n   */\n\n  var docElement = document.documentElement;\n\n  /**\n   * A convenience helper to check if the document we are running in is an SVG document\n   *\n   * @access private\n   * @returns {boolean}\n   */\n\n  var isSVG = docElement.nodeName.toLowerCase() === \"svg\";\n\n  /**\n   * setClasses takes an array of class names and adds them to the root element\n   *\n   * @access private\n   * @function setClasses\n   * @param {string[]} classes - Array of class names\n   */\n\n  // Pass in an and array of class names, e.g.:\n  //  ['no-webp', 'borderradius', ...]\n  function setClasses(classes) {\n    var className = docElement.className;\n    var classPrefix = Modernizr._config.classPrefix || \"\";\n\n    if (isSVG) {\n      className = className.baseVal;\n    }\n\n    // Change `no-js` to `js` (independently of the `enableClasses` option)\n    // Handle classPrefix on this too\n    if (Modernizr._config.enableJSClass) {\n      var reJS = new RegExp(\"(^|\\\\s)\" + classPrefix + \"no-js(\\\\s|$)\");\n      className = className.replace(reJS, \"$1\" + classPrefix + \"js$2\");\n    }\n\n    if (Modernizr._config.enableClasses) {\n      // Add the new classes\n      className += \" \" + classPrefix + classes.join(\" \" + classPrefix);\n      if (isSVG) {\n        docElement.className.baseVal = className;\n      } else {\n        docElement.className = className;\n      }\n    }\n  }\n\n  // _l tracks listeners for async tests, as well as tests that execute after the initial run\n  ModernizrProto._l = {};\n\n  /**\n   * Modernizr.on is a way to listen for the completion of async tests. Being\n   * asynchronous, they may not finish before your scripts run. As a result you\n   * will get a possibly false negative `undefined` value.\n   *\n   * @memberof Modernizr\n   * @name Modernizr.on\n   * @access public\n   * @function on\n   * @param {string} feature - String name of the feature detect\n   * @param {function} cb - Callback function returning a Boolean - true if feature is supported, false if not\n   * @example\n   *\n   * ```js\n   * Modernizr.on('flash', function( result ) {\n   *   if (result) {\n   *    // the browser has flash\n   *   } else {\n   *     // the browser does not have flash\n   *   }\n   * });\n   * ```\n   */\n\n  ModernizrProto.on = function(feature, cb) {\n    // Create the list of listeners if it doesn't exist\n    if (!this._l[feature]) {\n      this._l[feature] = [];\n    }\n\n    // Push this test on to the listener list\n    this._l[feature].push(cb);\n\n    // If it's already been resolved, trigger it on next tick\n    if (Modernizr.hasOwnProperty(feature)) {\n      // Next Tick\n      setTimeout(function() {\n        Modernizr._trigger(feature, Modernizr[feature]);\n      }, 0);\n    }\n  };\n\n  /**\n   * _trigger is the private function used to signal test completion and run any\n   * callbacks registered through [Modernizr.on](#modernizr-on)\n   *\n   * @memberof Modernizr\n   * @name Modernizr._trigger\n   * @access private\n   * @function _trigger\n   * @param {string} feature - string name of the feature detect\n   * @param {function|boolean} [res] - A feature detection function, or the boolean =\n   * result of a feature detection function\n   */\n\n  ModernizrProto._trigger = function(feature, res) {\n    if (!this._l[feature]) {\n      return;\n    }\n\n    var cbs = this._l[feature];\n\n    // Force async\n    setTimeout(function() {\n      var i, cb;\n      for (i = 0; i < cbs.length; i++) {\n        cb = cbs[i];\n        cb(res);\n      }\n    }, 0);\n\n    // Don't trigger these again\n    delete this._l[feature];\n  };\n\n  /**\n   * addTest allows you to define your own feature detects that are not currently\n   * included in Modernizr (under the covers it's the exact same code Modernizr\n   * uses for its own [feature detections](https://github.com/Modernizr/Modernizr/tree/master/feature-detects)). Just like the offical detects, the result\n   * will be added onto the Modernizr object, as well as an appropriate className set on\n   * the html element when configured to do so\n   *\n   * @memberof Modernizr\n   * @name Modernizr.addTest\n   * @optionName Modernizr.addTest()\n   * @optionProp addTest\n   * @access public\n   * @function addTest\n   * @param {string|object} feature - The string name of the feature detect, or an\n   * object of feature detect names and test\n   * @param {function|boolean} test - Function returning true if feature is supported,\n   * false if not. Otherwise a boolean representing the results of a feature detection\n   * @example\n   *\n   * The most common way of creating your own feature detects is by calling\n   * `Modernizr.addTest` with a string (preferably just lowercase, without any\n   * punctuation), and a function you want executed that will return a boolean result\n   *\n   * ```js\n   * Modernizr.addTest('itsTuesday', function() {\n   *  var d = new Date();\n   *  return d.getDay() === 2;\n   * });\n   * ```\n   *\n   * When the above is run, it will set Modernizr.itstuesday to `true` when it is tuesday,\n   * and to `false` every other day of the week. One thing to notice is that the names of\n   * feature detect functions are always lowercased when added to the Modernizr object. That\n   * means that `Modernizr.itsTuesday` will not exist, but `Modernizr.itstuesday` will.\n   *\n   *\n   *  Since we only look at the returned value from any feature detection function,\n   *  you do not need to actually use a function. For simple detections, just passing\n   *  in a statement that will return a boolean value works just fine.\n   *\n   * ```js\n   * Modernizr.addTest('hasJquery', 'jQuery' in window);\n   * ```\n   *\n   * Just like before, when the above runs `Modernizr.hasjquery` will be true if\n   * jQuery has been included on the page. Not using a function saves a small amount\n   * of overhead for the browser, as well as making your code much more readable.\n   *\n   * Finally, you also have the ability to pass in an object of feature names and\n   * their tests. This is handy if you want to add multiple detections in one go.\n   * The keys should always be a string, and the value can be either a boolean or\n   * function that returns a boolean.\n   *\n   * ```js\n   * var detects = {\n   *  'hasjquery': 'jQuery' in window,\n   *  'itstuesday': function() {\n   *    var d = new Date();\n   *    return d.getDay() === 2;\n   *  }\n   * }\n   *\n   * Modernizr.addTest(detects);\n   * ```\n   *\n   * There is really no difference between the first methods and this one, it is\n   * just a convenience to let you write more readable code.\n   */\n\n  function addTest(feature, test) {\n    if (typeof feature == \"object\") {\n      for (var key in feature) {\n        if (hasOwnProp(feature, key)) {\n          addTest(key, feature[key]);\n        }\n      }\n    } else {\n      feature = feature.toLowerCase();\n      var featureNameSplit = feature.split(\".\");\n      var last = Modernizr[featureNameSplit[0]];\n\n      // Again, we don't check for parent test existence. Get that right, though.\n      if (featureNameSplit.length == 2) {\n        last = last[featureNameSplit[1]];\n      }\n\n      if (typeof last != \"undefined\") {\n        // we're going to quit if you're trying to overwrite an existing test\n        // if we were to allow it, we'd do this:\n        //   var re = new RegExp(\"\\\\b(no-)?\" + feature + \"\\\\b\");\n        //   docElement.className = docElement.className.replace( re, '' );\n        // but, no rly, stuff 'em.\n        return Modernizr;\n      }\n\n      test = typeof test == \"function\" ? test() : test;\n\n      // Set the value (this is the magic, right here).\n      if (featureNameSplit.length == 1) {\n        Modernizr[featureNameSplit[0]] = test;\n      } else {\n        // cast to a Boolean, if not one already\n        if (\n          Modernizr[featureNameSplit[0]] &&\n          !(Modernizr[featureNameSplit[0]] instanceof Boolean)\n        ) {\n          Modernizr[featureNameSplit[0]] = new Boolean(\n            Modernizr[featureNameSplit[0]]\n          );\n        }\n\n        Modernizr[featureNameSplit[0]][featureNameSplit[1]] = test;\n      }\n\n      // Set a single class (either `feature` or `no-feature`)\n      setClasses([\n        (!!test && test != false ? \"\" : \"no-\") + featureNameSplit.join(\"-\")\n      ]);\n\n      // Trigger the event\n      Modernizr._trigger(feature, test);\n    }\n\n    return Modernizr; // allow chaining.\n  }\n\n  // After all the tests are run, add self to the Modernizr prototype\n  Modernizr._q.push(function() {\n    ModernizrProto.addTest = addTest;\n  });\n\n  /**\n   * createElement is a convenience wrapper around document.createElement. Since we\n   * use createElement all over the place, this allows for (slightly) smaller code\n   * as well as abstracting away issues with creating elements in contexts other than\n   * HTML documents (e.g. SVG documents).\n   *\n   * @access private\n   * @function createElement\n   * @returns {HTMLElement|SVGElement} An HTML or SVG element\n   */\n\n  function createElement() {\n    if (typeof document.createElement !== \"function\") {\n      // This is the case in IE7, where the type of createElement is \"object\".\n      // For this reason, we cannot call apply() as Object is not a Function.\n      return document.createElement(arguments[0]);\n    } else if (isSVG) {\n      return document.createElementNS.call(\n        document,\n        \"http://www.w3.org/2000/svg\",\n        arguments[0]\n      );\n    } else {\n      return document.createElement.apply(document, arguments);\n    }\n  }\n\n  /*!\n{\n  \"name\": \"CSS Transform Style preserve-3d\",\n  \"property\": \"preserve3d\",\n  \"authors\": [\"denyskoch\", \"aFarkas\"],\n  \"tags\": [\"css\"],\n  \"notes\": [{\n    \"name\": \"MDN Docs\",\n    \"href\": \"https://developer.mozilla.org/en-US/docs/Web/CSS/transform-style\"\n  },{\n    \"name\": \"Related Github Issue\",\n    \"href\": \"https://github.com/Modernizr/Modernizr/issues/1748\"\n  }]\n}\n!*/\n  /* DOC\nDetects support for `transform-style: preserve-3d`, for getting a proper 3D perspective on elements.\n*/\n\n  Modernizr.addTest(\"preserve3d\", function() {\n    var outerAnchor, innerAnchor;\n    var CSS = window.CSS;\n    var result = false;\n\n    if (CSS && CSS.supports && CSS.supports(\"(transform-style: preserve-3d)\")) {\n      return true;\n    }\n\n    outerAnchor = createElement(\"a\");\n    innerAnchor = createElement(\"a\");\n\n    outerAnchor.style.cssText =\n      \"display: block; transform-style: preserve-3d; transform-origin: right; transform: rotateY(40deg);\";\n    innerAnchor.style.cssText =\n      \"display: block; width: 9px; height: 1px; background: #000; transform-origin: right; transform: rotateY(40deg);\";\n\n    outerAnchor.appendChild(innerAnchor);\n    docElement.appendChild(outerAnchor);\n\n    result = innerAnchor.getBoundingClientRect();\n    docElement.removeChild(outerAnchor);\n\n    result = result.width && result.width < 4;\n    return result;\n  });\n\n  /**\n   * getBody returns the body of a document, or an element that can stand in for\n   * the body if a real body does not exist\n   *\n   * @access private\n   * @function getBody\n   * @returns {HTMLElement|SVGElement} Returns the real body of a document, or an\n   * artificially created element that stands in for the body\n   */\n\n  function getBody() {\n    // After page load injecting a fake body doesn't work so check if body exists\n    var body = document.body;\n\n    if (!body) {\n      // Can't use the real body create a fake one.\n      body = createElement(isSVG ? \"svg\" : \"body\");\n      body.fake = true;\n    }\n\n    return body;\n  }\n\n  /**\n   * injectElementWithStyles injects an element with style element and some CSS rules\n   *\n   * @access private\n   * @function injectElementWithStyles\n   * @param {string} rule - String representing a css rule\n   * @param {function} callback - A function that is used to test the injected element\n   * @param {number} [nodes] - An integer representing the number of additional nodes you want injected\n   * @param {string[]} [testnames] - An array of strings that are used as ids for the additional nodes\n   * @returns {boolean}\n   */\n\n  function injectElementWithStyles(rule, callback, nodes, testnames) {\n    var mod = \"modernizr\";\n    var style;\n    var ret;\n    var node;\n    var docOverflow;\n    var div = createElement(\"div\");\n    var body = getBody();\n\n    if (parseInt(nodes, 10)) {\n      // In order not to give false positives we create a node for each test\n      // This also allows the method to scale for unspecified uses\n      while (nodes--) {\n        node = createElement(\"div\");\n        node.id = testnames ? testnames[nodes] : mod + (nodes + 1);\n        div.appendChild(node);\n      }\n    }\n\n    style = createElement(\"style\");\n    style.type = \"text/css\";\n    style.id = \"s\" + mod;\n\n    // IE6 will false positive on some tests due to the style element inside the test div somehow interfering offsetHeight, so insert it into body or fakebody.\n    // Opera will act all quirky when injecting elements in documentElement when page is served as xml, needs fakebody too. #270\n    (!body.fake ? div : body).appendChild(style);\n    body.appendChild(div);\n\n    if (style.styleSheet) {\n      style.styleSheet.cssText = rule;\n    } else {\n      style.appendChild(document.createTextNode(rule));\n    }\n    div.id = mod;\n\n    if (body.fake) {\n      //avoid crashing IE8, if background image is used\n      body.style.background = \"\";\n      //Safari 5.13/5.1.4 OSX stops loading if ::-webkit-scrollbar is used and scrollbars are visible\n      body.style.overflow = \"hidden\";\n      docOverflow = docElement.style.overflow;\n      docElement.style.overflow = \"hidden\";\n      docElement.appendChild(body);\n    }\n\n    ret = callback(div, rule);\n    // If this is done after page load we don't want to remove the body so check if body exists\n    if (body.fake) {\n      body.parentNode.removeChild(body);\n      docElement.style.overflow = docOverflow;\n      // Trigger layout so kinetic scrolling isn't disabled in iOS6+\n      // eslint-disable-next-line\n      docElement.offsetHeight;\n    } else {\n      div.parentNode.removeChild(div);\n    }\n\n    return !!ret;\n  }\n\n  /**\n   * testStyles injects an element with style element and some CSS rules\n   *\n   * @memberof Modernizr\n   * @name Modernizr.testStyles\n   * @optionName Modernizr.testStyles()\n   * @optionProp testStyles\n   * @access public\n   * @function testStyles\n   * @param {string} rule - String representing a css rule\n   * @param {function} callback - A function that is used to test the injected element\n   * @param {number} [nodes] - An integer representing the number of additional nodes you want injected\n   * @param {string[]} [testnames] - An array of strings that are used as ids for the additional nodes\n   * @returns {boolean}\n   * @example\n   *\n   * `Modernizr.testStyles` takes a CSS rule and injects it onto the current page\n   * along with (possibly multiple) DOM elements. This lets you check for features\n   * that can not be detected by simply checking the [IDL](https://developer.mozilla.org/en-US/docs/Mozilla/Developer_guide/Interface_development_guide/IDL_interface_rules).\n   *\n   * ```js\n   * Modernizr.testStyles('#modernizr { width: 9px; color: papayawhip; }', function(elem, rule) {\n   *   // elem is the first DOM node in the page (by default #modernizr)\n   *   // rule is the first argument you supplied - the CSS rule in string form\n   *\n   *   addTest('widthworks', elem.style.width === '9px')\n   * });\n   * ```\n   *\n   * If your test requires multiple nodes, you can include a third argument\n   * indicating how many additional div elements to include on the page. The\n   * additional nodes are injected as children of the `elem` that is returned as\n   * the first argument to the callback.\n   *\n   * ```js\n   * Modernizr.testStyles('#modernizr {width: 1px}; #modernizr2 {width: 2px}', function(elem) {\n   *   document.getElementById('modernizr').style.width === '1px'; // true\n   *   document.getElementById('modernizr2').style.width === '2px'; // true\n   *   elem.firstChild === document.getElementById('modernizr2'); // true\n   * }, 1);\n   * ```\n   *\n   * By default, all of the additional elements have an ID of `modernizr[n]`, where\n   * `n` is its index (e.g. the first additional, second overall is `#modernizr2`,\n   * the second additional is `#modernizr3`, etc.).\n   * If you want to have more meaningful IDs for your function, you can provide\n   * them as the fourth argument, as an array of strings\n   *\n   * ```js\n   * Modernizr.testStyles('#foo {width: 10px}; #bar {height: 20px}', function(elem) {\n   *   elem.firstChild === document.getElementById('foo'); // true\n   *   elem.lastChild === document.getElementById('bar'); // true\n   * }, 2, ['foo', 'bar']);\n   * ```\n   *\n   */\n\n  var testStyles = (ModernizrProto.testStyles = injectElementWithStyles);\n\n  /**\n   * If the browsers follow the spec, then they would expose vendor-specific styles as:\n   *   elem.style.WebkitBorderRadius\n   * instead of something like the following (which is technically incorrect):\n   *   elem.style.webkitBorderRadius\n\n   * WebKit ghosts their properties in lowercase but Opera & Moz do not.\n   * Microsoft uses a lowercase `ms` instead of the correct `Ms` in IE8+\n   *   erik.eae.net/archives/2008/03/10/21.48.10/\n\n   * More here: github.com/Modernizr/Modernizr/issues/issue/21\n   *\n   * @access private\n   * @returns {string} The string representing the vendor-specific style properties\n   */\n\n  var omPrefixes = \"Moz O ms Webkit\";\n\n  var cssomPrefixes = ModernizrProto._config.usePrefixes\n    ? omPrefixes.split(\" \")\n    : [];\n  ModernizrProto._cssomPrefixes = cssomPrefixes;\n\n  /**\n   * atRule returns a given CSS property at-rule (eg @keyframes), possibly in\n   * some prefixed form, or false, in the case of an unsupported rule\n   *\n   * @memberof Modernizr\n   * @name Modernizr.atRule\n   * @optionName Modernizr.atRule()\n   * @optionProp atRule\n   * @access public\n   * @function atRule\n   * @param {string} prop - String name of the @-rule to test for\n   * @returns {string|boolean} The string representing the (possibly prefixed)\n   * valid version of the @-rule, or `false` when it is unsupported.\n   * @example\n   * ```js\n   *  var keyframes = Modernizr.atRule('@keyframes');\n   *\n   *  if (keyframes) {\n   *    // keyframes are supported\n   *    // could be `@-webkit-keyframes` or `@keyframes`\n   *  } else {\n   *    // keyframes === `false`\n   *  }\n   * ```\n   *\n   */\n\n  var atRule = function(prop) {\n    var length = prefixes.length;\n    var cssrule = window.CSSRule;\n    var rule;\n\n    if (typeof cssrule === \"undefined\") {\n      return undefined;\n    }\n\n    if (!prop) {\n      return false;\n    }\n\n    // remove literal @ from beginning of provided property\n    prop = prop.replace(/^@/, \"\");\n\n    // CSSRules use underscores instead of dashes\n    rule = prop.replace(/-/g, \"_\").toUpperCase() + \"_RULE\";\n\n    if (rule in cssrule) {\n      return \"@\" + prop;\n    }\n\n    for (var i = 0; i < length; i++) {\n      // prefixes gives us something like -o-, and we want O_\n      var prefix = prefixes[i];\n      var thisRule = prefix.toUpperCase() + \"_\" + rule;\n\n      if (thisRule in cssrule) {\n        return \"@-\" + prefix.toLowerCase() + \"-\" + prop;\n      }\n    }\n\n    return false;\n  };\n\n  ModernizrProto.atRule = atRule;\n\n  /**\n   * List of JavaScript DOM values used for tests\n   *\n   * @memberof Modernizr\n   * @name Modernizr._domPrefixes\n   * @optionName Modernizr._domPrefixes\n   * @optionProp domPrefixes\n   * @access public\n   * @example\n   *\n   * Modernizr._domPrefixes is exactly the same as [_prefixes](#modernizr-_prefixes), but rather\n   * than kebab-case properties, all properties are their Capitalized variant\n   *\n   * ```js\n   * Modernizr._domPrefixes === [ \"Moz\", \"O\", \"ms\", \"Webkit\" ];\n   * ```\n   */\n\n  var domPrefixes = ModernizrProto._config.usePrefixes\n    ? omPrefixes.toLowerCase().split(\" \")\n    : [];\n  ModernizrProto._domPrefixes = domPrefixes;\n\n  /**\n   * contains checks to see if a string contains another string\n   *\n   * @access private\n   * @function contains\n   * @param {string} str - The string we want to check for substrings\n   * @param {string} substr - The substring we want to search the first string for\n   * @returns {boolean}\n   */\n\n  function contains(str, substr) {\n    return !!~(\"\" + str).indexOf(substr);\n  }\n\n  /**\n   * fnBind is a super small [bind](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind) polyfill.\n   *\n   * @access private\n   * @function fnBind\n   * @param {function} fn - a function you want to change `this` reference to\n   * @param {object} that - the `this` you want to call the function with\n   * @returns {function} The wrapped version of the supplied function\n   */\n\n  function fnBind(fn, that) {\n    return function() {\n      return fn.apply(that, arguments);\n    };\n  }\n\n  /**\n   * testDOMProps is a generic DOM property test; if a browser supports\n   *   a certain property, it won't return undefined for it.\n   *\n   * @access private\n   * @function testDOMProps\n   * @param {array.<string>} props - An array of properties to test for\n   * @param {object} obj - An object or Element you want to use to test the parameters again\n   * @param {boolean|object} elem - An Element to bind the property lookup again. Use `false` to prevent the check\n   * @returns {false|*} returns false if the prop is unsupported, otherwise the value that is supported\n   */\n  function testDOMProps(props, obj, elem) {\n    var item;\n\n    for (var i in props) {\n      if (props[i] in obj) {\n        // return the property name as a string\n        if (elem === false) {\n          return props[i];\n        }\n\n        item = obj[props[i]];\n\n        // let's bind a function\n        if (is(item, \"function\")) {\n          // bind to obj unless overriden\n          return fnBind(item, elem || obj);\n        }\n\n        // return the unbound function or obj or value\n        return item;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Create our \"modernizr\" element that we do most feature tests on.\n   *\n   * @access private\n   */\n\n  var modElem = {\n    elem: createElement(\"modernizr\")\n  };\n\n  // Clean up this element\n  Modernizr._q.push(function() {\n    delete modElem.elem;\n  });\n\n  var mStyle = {\n    style: modElem.elem.style\n  };\n\n  // kill ref for gc, must happen before mod.elem is removed, so we unshift on to\n  // the front of the queue.\n  Modernizr._q.unshift(function() {\n    delete mStyle.style;\n  });\n\n  /**\n   * domToCSS takes a camelCase string and converts it to kebab-case\n   * e.g. boxSizing -> box-sizing\n   *\n   * @access private\n   * @function domToCSS\n   * @param {string} name - String name of camelCase prop we want to convert\n   * @returns {string} The kebab-case version of the supplied name\n   */\n\n  function domToCSS(name) {\n    return name\n      .replace(/([A-Z])/g, function(str, m1) {\n        return \"-\" + m1.toLowerCase();\n      })\n      .replace(/^ms-/, \"-ms-\");\n  }\n  /**\n   * wrapper around getComputedStyle, to fix issues with Firefox returning null when\n   * called inside of a hidden iframe\n   *\n   * @access private\n   * @function computedStyle\n   * @param {HTMLElement|SVGElement} - The element we want to find the computed styles of\n   * @param {string|null} [pseudoSelector]- An optional pseudo element selector (e.g. :before), of null if none\n   * @returns {CSSStyleDeclaration}\n   */\n\n  function computedStyle(elem, pseudo, prop) {\n    var result;\n\n    if (\"getComputedStyle\" in window) {\n      result = getComputedStyle.call(window, elem, pseudo);\n      var console = window.console;\n\n      if (result !== null) {\n        if (prop) {\n          result = result.getPropertyValue(prop);\n        }\n      } else {\n        if (console) {\n          var method = console.error ? \"error\" : \"log\";\n          console[method].call(\n            console,\n            \"getComputedStyle returning null, its possible modernizr test results are inaccurate\"\n          );\n        }\n      }\n    } else {\n      result = !pseudo && elem.currentStyle && elem.currentStyle[prop];\n    }\n\n    return result;\n  }\n\n  /**\n   * nativeTestProps allows for us to use native feature detection functionality if available.\n   * some prefixed form, or false, in the case of an unsupported rule\n   *\n   * @access private\n   * @function nativeTestProps\n   * @param {array} props - An array of property names\n   * @param {string} value - A string representing the value we want to check via @supports\n   * @returns {boolean|undefined} A boolean when @supports exists, undefined otherwise\n   */\n\n  // Accepts a list of property names and a single value\n  // Returns `undefined` if native detection not available\n  function nativeTestProps(props, value) {\n    var i = props.length;\n    // Start with the JS API: http://www.w3.org/TR/css3-conditional/#the-css-interface\n    if (\"CSS\" in window && \"supports\" in window.CSS) {\n      // Try every prefixed variant of the property\n      while (i--) {\n        if (window.CSS.supports(domToCSS(props[i]), value)) {\n          return true;\n        }\n      }\n      return false;\n    }\n    // Otherwise fall back to at-rule (for Opera 12.x)\n    else if (\"CSSSupportsRule\" in window) {\n      // Build a condition string for every prefixed variant\n      var conditionText = [];\n      while (i--) {\n        conditionText.push(\"(\" + domToCSS(props[i]) + \":\" + value + \")\");\n      }\n      conditionText = conditionText.join(\" or \");\n      return injectElementWithStyles(\n        \"@supports (\" +\n          conditionText +\n          \") { #modernizr { position: absolute; } }\",\n        function(node) {\n          return computedStyle(node, null, \"position\") == \"absolute\";\n        }\n      );\n    }\n    return undefined;\n  }\n  // testProps is a generic CSS / DOM property test.\n\n  // In testing support for a given CSS property, it's legit to test:\n  //    `elem.style[styleName] !== undefined`\n  // If the property is supported it will return an empty string,\n  // if unsupported it will return undefined.\n\n  // We'll take advantage of this quick test and skip setting a style\n  // on our modernizr element, but instead just testing undefined vs\n  // empty string.\n\n  // Property names can be provided in either camelCase or kebab-case.\n\n  function testProps(props, prefixed, value, skipValueTest) {\n    skipValueTest = is(skipValueTest, \"undefined\") ? false : skipValueTest;\n\n    // Try native detect first\n    if (!is(value, \"undefined\")) {\n      var result = nativeTestProps(props, value);\n      if (!is(result, \"undefined\")) {\n        return result;\n      }\n    }\n\n    // Otherwise do it properly\n    var afterInit, i, propsLength, prop, before;\n\n    // If we don't have a style element, that means we're running async or after\n    // the core tests, so we'll need to create our own elements to use\n\n    // inside of an SVG element, in certain browsers, the `style` element is only\n    // defined for valid tags. Therefore, if `modernizr` does not have one, we\n    // fall back to a less used element and hope for the best.\n    // for strict XHTML browsers the hardly used samp element is used\n    var elems = [\"modernizr\", \"tspan\", \"samp\"];\n    while (!mStyle.style && elems.length) {\n      afterInit = true;\n      mStyle.modElem = createElement(elems.shift());\n      mStyle.style = mStyle.modElem.style;\n    }\n\n    // Delete the objects if we created them.\n    function cleanElems() {\n      if (afterInit) {\n        delete mStyle.style;\n        delete mStyle.modElem;\n      }\n    }\n\n    propsLength = props.length;\n    for (i = 0; i < propsLength; i++) {\n      prop = props[i];\n      before = mStyle.style[prop];\n\n      if (contains(prop, \"-\")) {\n        prop = cssToDOM(prop);\n      }\n\n      if (mStyle.style[prop] !== undefined) {\n        // If value to test has been passed in, do a set-and-check test.\n        // 0 (integer) is a valid property value, so check that `value` isn't\n        // undefined, rather than just checking it's truthy.\n        if (!skipValueTest && !is(value, \"undefined\")) {\n          // Needs a try catch block because of old IE. This is slow, but will\n          // be avoided in most cases because `skipValueTest` will be used.\n          try {\n            mStyle.style[prop] = value;\n          } catch (e) {}\n\n          // If the property value has changed, we assume the value used is\n          // supported. If `value` is empty string, it'll fail here (because\n          // it hasn't changed), which matches how browsers have implemented\n          // CSS.supports()\n          if (mStyle.style[prop] != before) {\n            cleanElems();\n            return prefixed == \"pfx\" ? prop : true;\n          }\n        }\n        // Otherwise just return true, or the property name if this is a\n        // `prefixed()` call\n        else {\n          cleanElems();\n          return prefixed == \"pfx\" ? prop : true;\n        }\n      }\n    }\n    cleanElems();\n    return false;\n  }\n\n  /**\n   * testPropsAll tests a list of DOM properties we want to check against.\n   * We specify literally ALL possible (known and/or likely) properties on\n   * the element including the non-vendor prefixed one, for forward-\n   * compatibility.\n   *\n   * @access private\n   * @function testPropsAll\n   * @param {string} prop - A string of the property to test for\n   * @param {string|object} [prefixed] - An object to check the prefixed properties on. Use a string to skip\n   * @param {HTMLElement|SVGElement} [elem] - An element used to test the property and value against\n   * @param {string} [value] - A string of a css value\n   * @param {boolean} [skipValueTest] - An boolean representing if you want to test if value sticks when set\n   * @returns {false|string} returns the string version of the property, or false if it is unsupported\n   */\n  function testPropsAll(prop, prefixed, elem, value, skipValueTest) {\n    var ucProp = prop.charAt(0).toUpperCase() + prop.slice(1),\n      props = (prop + \" \" + cssomPrefixes.join(ucProp + \" \") + ucProp).split(\n        \" \"\n      );\n\n    // did they call .prefixed('boxSizing') or are we just testing a prop?\n    if (is(prefixed, \"string\") || is(prefixed, \"undefined\")) {\n      return testProps(props, prefixed, value, skipValueTest);\n\n      // otherwise, they called .prefixed('requestAnimationFrame', window[, elem])\n    } else {\n      props = (prop + \" \" + domPrefixes.join(ucProp + \" \") + ucProp).split(\" \");\n      return testDOMProps(props, prefixed, elem);\n    }\n  }\n\n  // Modernizr.testAllProps() investigates whether a given style property,\n  // or any of its vendor-prefixed variants, is recognized\n  //\n  // Note that the property names must be provided in the camelCase variant.\n  // Modernizr.testAllProps('boxSizing')\n  ModernizrProto.testAllProps = testPropsAll;\n\n  /**\n   * prefixed returns the prefixed or nonprefixed property name variant of your input\n   *\n   * @memberof Modernizr\n   * @name Modernizr.prefixed\n   * @optionName Modernizr.prefixed()\n   * @optionProp prefixed\n   * @access public\n   * @function prefixed\n   * @param {string} prop - String name of the property to test for\n   * @param {object} [obj] - An object to test for the prefixed properties on\n   * @param {HTMLElement} [elem] - An element used to test specific properties against\n   * @returns {string|false} The string representing the (possibly prefixed) valid\n   * version of the property, or `false` when it is unsupported.\n   * @example\n   *\n   * Modernizr.prefixed takes a string css value in the DOM style camelCase (as\n   * opposed to the css style kebab-case) form and returns the (possibly prefixed)\n   * version of that property that the browser actually supports.\n   *\n   * For example, in older Firefox...\n   * ```js\n   * prefixed('boxSizing')\n   * ```\n   * returns 'MozBoxSizing'\n   *\n   * In newer Firefox, as well as any other browser that support the unprefixed\n   * version would simply return `boxSizing`. Any browser that does not support\n   * the property at all, it will return `false`.\n   *\n   * By default, prefixed is checked against a DOM element. If you want to check\n   * for a property on another object, just pass it as a second argument\n   *\n   * ```js\n   * var rAF = prefixed('requestAnimationFrame', window);\n   *\n   * raf(function() {\n   *  renderFunction();\n   * })\n   * ```\n   *\n   * Note that this will return _the actual function_ - not the name of the function.\n   * If you need the actual name of the property, pass in `false` as a third argument\n   *\n   * ```js\n   * var rAFProp = prefixed('requestAnimationFrame', window, false);\n   *\n   * rafProp === 'WebkitRequestAnimationFrame' // in older webkit\n   * ```\n   *\n   * One common use case for prefixed is if you're trying to determine which transition\n   * end event to bind to, you might do something like...\n   * ```js\n   * var transEndEventNames = {\n   *     'WebkitTransition' : 'webkitTransitionEnd', * Saf 6, Android Browser\n   *     'MozTransition'    : 'transitionend',       * only for FF < 15\n   *     'transition'       : 'transitionend'        * IE10, Opera, Chrome, FF 15+, Saf 7+\n   * };\n   *\n   * var transEndEventName = transEndEventNames[ Modernizr.prefixed('transition') ];\n   * ```\n   *\n   * If you want a similar lookup, but in kebab-case, you can use [prefixedCSS](#modernizr-prefixedcss).\n   */\n\n  var prefixed = (ModernizrProto.prefixed = function(prop, obj, elem) {\n    if (prop.indexOf(\"@\") === 0) {\n      return atRule(prop);\n    }\n\n    if (prop.indexOf(\"-\") != -1) {\n      // Convert kebab-case to camelCase\n      prop = cssToDOM(prop);\n    }\n    if (!obj) {\n      return testPropsAll(prop, \"pfx\");\n    } else {\n      // Testing DOM property e.g. Modernizr.prefixed('requestAnimationFrame', window) // 'mozRequestAnimationFrame'\n      return testPropsAll(prop, obj, elem);\n    }\n  });\n\n  /**\n   * testAllProps determines whether a given CSS property is supported in the browser\n   *\n   * @memberof Modernizr\n   * @name Modernizr.testAllProps\n   * @optionName Modernizr.testAllProps()\n   * @optionProp testAllProps\n   * @access public\n   * @function testAllProps\n   * @param {string} prop - String naming the property to test (either camelCase or kebab-case)\n   * @param {string} [value] - String of the value to test\n   * @param {boolean} [skipValueTest=false] - Whether to skip testing that the value is supported when using non-native detection\n   * @example\n   *\n   * testAllProps determines whether a given CSS property, in some prefixed form,\n   * is supported by the browser.\n   *\n   * ```js\n   * testAllProps('boxSizing')  // true\n   * ```\n   *\n   * It can optionally be given a CSS value in string form to test if a property\n   * value is valid\n   *\n   * ```js\n   * testAllProps('display', 'block') // true\n   * testAllProps('display', 'penguin') // false\n   * ```\n   *\n   * A boolean can be passed as a third parameter to skip the value check when\n   * native detection (@supports) isn't available.\n   *\n   * ```js\n   * testAllProps('shapeOutside', 'content-box', true);\n   * ```\n   */\n\n  function testAllProps(prop, value, skipValueTest) {\n    return testPropsAll(prop, undefined, undefined, value, skipValueTest);\n  }\n  ModernizrProto.testAllProps = testAllProps;\n\n  /*!\n{\n  \"name\": \"CSS Transforms 3D\",\n  \"property\": \"csstransforms3d\",\n  \"caniuse\": \"transforms3d\",\n  \"tags\": [\"css\"],\n  \"warnings\": [\n    \"Chrome may occassionally fail this test on some systems; more info: https://code.google.com/p/chromium/issues/detail?id=129004\"\n  ]\n}\n!*/\n\n  Modernizr.addTest(\"csstransforms3d\", function() {\n    return !!testAllProps(\"perspective\", \"1px\", true);\n  });\n\n  /*!\n{\n  \"name\": \"CSS Transitions\",\n  \"property\": \"csstransitions\",\n  \"caniuse\": \"css-transitions\",\n  \"tags\": [\"css\"]\n}\n!*/\n\n  Modernizr.addTest(\"csstransitions\", testAllProps(\"transition\", \"all\", true));\n\n  // Run each test\n  testRunner();\n\n  delete ModernizrProto.addTest;\n  delete ModernizrProto.addAsyncTest;\n\n  // Run the things that are supposed to run after the tests\n  for (var i = 0; i < Modernizr._q.length; i++) {\n    Modernizr._q[i]();\n  }\n\n  // Leak Modernizr namespace\n  window.Modernizr = Modernizr;\n})(window, document);\n","(function() {\n  var event = jQuery.event,\n    //helper that finds handlers by type and calls back a function, this is basically handle\n    // events - the events object\n    // types - an array of event types to look for\n    // callback(type, handlerFunc, selector) - a callback\n    // selector - an optional selector to filter with, if there, matches by selector\n    //     if null, matches anything, otherwise, matches with no selector\n    findHelper = function(events, types, callback, selector) {\n      var t, type, typeHandlers, all, h, handle, namespaces, namespace, match;\n      for (t = 0; t < types.length; t++) {\n        type = types[t];\n        all = type.indexOf(\".\") < 0;\n        if (!all) {\n          namespaces = type.split(\".\");\n          type = namespaces.shift();\n          namespace = new RegExp(\n            \"(^|\\\\.)\" +\n              namespaces\n                .slice(0)\n                .sort()\n                .join(\"\\\\.(?:.*\\\\.)?\") +\n              \"(\\\\.|$)\"\n          );\n        }\n        typeHandlers = (events[type] || []).slice(0);\n\n        for (h = 0; h < typeHandlers.length; h++) {\n          handle = typeHandlers[h];\n\n          match = all || namespace.test(handle.namespace);\n\n          if (match) {\n            if (selector) {\n              if (handle.selector === selector) {\n                callback(type, handle.origHandler || handle.handler);\n              }\n            } else if (selector === null) {\n              callback(\n                type,\n                handle.origHandler || handle.handler,\n                handle.selector\n              );\n            } else if (!handle.selector) {\n              callback(type, handle.origHandler || handle.handler);\n            }\n          }\n        }\n      }\n    };\n\n  /**\n   * Finds event handlers of a given type on an element.\n   * @param {HTMLElement} el\n   * @param {Array} types an array of event names\n   * @param {String} [selector] optional selector\n   * @return {Array} an array of event handlers\n   */\n  event.find = function(el, types, selector) {\n    var events = ($._data(el) || {}).events,\n      handlers = [],\n      t,\n      liver,\n      live;\n\n    if (!events) {\n      return handlers;\n    }\n    findHelper(\n      events,\n      types,\n      function(type, handler) {\n        handlers.push(handler);\n      },\n      selector\n    );\n    return handlers;\n  };\n  /**\n   * Finds all events.  Group by selector.\n   * @param {HTMLElement} el the element\n   * @param {Array} types event types\n   */\n  event.findBySelector = function(el, types) {\n    var events = $._data(el).events,\n      selectors = {},\n      //adds a handler for a given selector and event\n      add = function(selector, event, handler) {\n        var select = selectors[selector] || (selectors[selector] = {}),\n          events = select[event] || (select[event] = []);\n        events.push(handler);\n      };\n\n    if (!events) {\n      return selectors;\n    }\n    //first check live:\n    /*$.each(events.live || [], function( i, live ) {\n\t\t\tif ( $.inArray(live.origType, types) !== -1 ) {\n\t\t\t\tadd(live.selector, live.origType, live.origHandler || live.handler);\n\t\t\t}\n\t\t});*/\n    //then check straight binds\n    findHelper(\n      events,\n      types,\n      function(type, handler, selector) {\n        add(selector || \"\", type, handler);\n      },\n      null\n    );\n\n    return selectors;\n  };\n  event.supportTouch = \"ontouchend\" in document;\n\n  $.fn.respondsTo = function(events) {\n    if (!this.length) {\n      return false;\n    } else {\n      //add default ?\n      return (\n        event.find(this[0], $.isArray(events) ? events : [events]).length > 0\n      );\n    }\n  };\n  $.fn.triggerHandled = function(event, data) {\n    event = typeof event == \"string\" ? $.Event(event) : event;\n    this.trigger(event, data);\n    return event.handled;\n  };\n  /**\n   * Only attaches one event handler for all types ...\n   * @param {Array} types llist of types that will delegate here\n   * @param {Object} startingEvent the first event to start listening to\n   * @param {Object} onFirst a function to call\n   */\n  event.setupHelper = function(types, startingEvent, onFirst) {\n    if (!onFirst) {\n      onFirst = startingEvent;\n      startingEvent = null;\n    }\n    var add = function(handleObj) {\n        var bySelector,\n          selector = handleObj.selector || \"\";\n        if (selector) {\n          bySelector = event.find(this, types, selector);\n          if (!bySelector.length) {\n            $(this).delegate(selector, startingEvent, onFirst);\n          }\n        } else {\n          //var bySelector = event.find(this, types, selector);\n          if (!event.find(this, types, selector).length) {\n            event.add(this, startingEvent, onFirst, {\n              selector: selector,\n              delegate: this\n            });\n          }\n        }\n      },\n      remove = function(handleObj) {\n        var bySelector,\n          selector = handleObj.selector || \"\";\n        if (selector) {\n          bySelector = event.find(this, types, selector);\n          if (!bySelector.length) {\n            $(this).undelegate(selector, startingEvent, onFirst);\n          }\n        } else {\n          if (!event.find(this, types, selector).length) {\n            event.remove(this, startingEvent, onFirst, {\n              selector: selector,\n              delegate: this\n            });\n          }\n        }\n      };\n    $.each(types, function() {\n      event.special[this] = {\n        add: add,\n        remove: remove,\n        setup: function() {},\n        teardown: function() {}\n      };\n    });\n  };\n})(jQuery);\n(function($) {\n  var isPhantom = /Phantom/.test(navigator.userAgent),\n    supportTouch = !isPhantom && \"ontouchend\" in document,\n    scrollEvent = \"touchmove scroll\",\n    // Use touch events or map it to mouse events\n    touchStartEvent = supportTouch ? \"touchstart\" : \"mousedown\",\n    touchStopEvent = supportTouch ? \"touchend\" : \"mouseup\",\n    touchMoveEvent = supportTouch ? \"touchmove\" : \"mousemove\",\n    data = function(event) {\n      var d = event.originalEvent.touches\n        ? event.originalEvent.touches[0]\n        : event;\n      return {\n        time: new Date().getTime(),\n        coords: [d.pageX, d.pageY],\n        origin: $(event.target)\n      };\n    };\n\n  /**\n   * @add jQuery.event.swipe\n   */\n  var swipe = ($.event.swipe = {\n    /**\n     * @attribute delay\n     * Delay is the upper limit of time the swipe motion can take in milliseconds.  This defaults to 500.\n     *\n     * A user must perform the swipe motion in this much time.\n     */\n    delay: 500,\n    /**\n     * @attribute max\n     * The maximum distance the pointer must travel in pixels.  The default is 75 pixels.\n     */\n    max: 75,\n    /**\n     * @attribute min\n     * The minimum distance the pointer must travel in pixels.  The default is 30 pixels.\n     */\n    min: 30\n  });\n\n  $.event.setupHelper(\n    [\n      /**\n       * @hide\n       * @attribute swipe\n       */\n      \"swipe\",\n      /**\n       * @hide\n       * @attribute swipeleft\n       */\n      \"swipeleft\",\n      /**\n       * @hide\n       * @attribute swiperight\n       */\n      \"swiperight\",\n      /**\n       * @hide\n       * @attribute swipeup\n       */\n      \"swipeup\",\n      /**\n       * @hide\n       * @attribute swipedown\n       */\n      \"swipedown\"\n    ],\n    touchStartEvent,\n    function(ev) {\n      var // update with data when the event was started\n        start = data(ev),\n        stop,\n        delegate = ev.delegateTarget || ev.currentTarget,\n        selector = ev.handleObj.selector,\n        entered = this;\n\n      function moveHandler(event) {\n        if (!start) {\n          return;\n        }\n        // update stop with the data from the current event\n        stop = data(event);\n\n        // prevent scrolling\n        if (Math.abs(start.coords[0] - stop.coords[0]) > 10) {\n          event.preventDefault();\n        }\n      }\n\n      // Attach to the touch move events\n      $(document.documentElement)\n        .bind(touchMoveEvent, moveHandler)\n        .one(touchStopEvent, function(event) {\n          $(this).unbind(touchMoveEvent, moveHandler);\n          // if start and stop contain data figure out if we have a swipe event\n          if (start && stop) {\n            // calculate the distance between start and stop data\n            var deltaX = Math.abs(start.coords[0] - stop.coords[0]),\n              deltaY = Math.abs(start.coords[1] - stop.coords[1]),\n              distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n\n            // check if the delay and distance are matched\n            if (stop.time - start.time < swipe.delay && distance >= swipe.min) {\n              var events = [\"swipe\"];\n              // check if we moved horizontally\n              if (deltaX >= swipe.min && deltaY < swipe.min) {\n                // based on the x coordinate check if we moved left or right\n                events.push(\n                  start.coords[0] > stop.coords[0] ? \"swipeleft\" : \"swiperight\"\n                );\n              }\n              // check if we moved vertically\n              else if (deltaY >= swipe.min && deltaX < swipe.min) {\n                // based on the y coordinate check if we moved up or down\n                events.push(\n                  start.coords[1] < stop.coords[1] ? \"swipedown\" : \"swipeup\"\n                );\n              }\n\n              // trigger swipe events on this guy\n              $.each($.event.find(delegate, events, selector), function() {\n                this.call(entered, ev, { start: start, end: stop });\n              });\n            }\n          }\n          // reset start and stop\n          start = stop = undefined;\n        });\n    }\n  );\n})(jQuery);\n","/**\n * jquery.bookblock.js v2.0.1\n * http://www.codrops.com\n *\n * Licensed under the MIT license.\n * http://www.opensource.org/licenses/mit-license.php\n *\n * Copyright 2013, Codrops\n * http://www.codrops.com\n */\n(function($, window, undefined) {\n  \"use strict\";\n\n  // global\n  var $window = $(window),\n    Modernizr = window.Modernizr;\n\n  // https://gist.github.com/edankwan/4389601\n  Modernizr.addTest(\"csstransformspreserve3d\", function() {\n    var prop = Modernizr.prefixed(\"transformStyle\");\n    var val = \"preserve-3d\";\n    var computedStyle;\n    if (!prop) return false;\n\n    prop = prop\n      .replace(/([A-Z])/g, function(str, m1) {\n        return \"-\" + m1.toLowerCase();\n      })\n      .replace(/^ms-/, \"-ms-\");\n\n    Modernizr.testStyles(\"#modernizr{\" + prop + \":\" + val + \";}\", function(\n      el,\n      rule\n    ) {\n      computedStyle = window.getComputedStyle\n        ? getComputedStyle(el, null).getPropertyValue(prop)\n        : \"\";\n    });\n\n    return computedStyle === val;\n  });\n\n  /*\n   * debouncedresize: special jQuery event that happens once after a window resize\n   *\n   * latest version and complete README available on Github:\n   * https://github.com/louisremi/jquery-smartresize\n   *\n   * Copyright 2012 @louis_remi\n   * Licensed under the MIT license.\n   *\n   * This saved you an hour of work?\n   * Send me music http://www.amazon.co.uk/wishlist/HNTU0468LQON\n   */\n  var $event = $.event,\n    $special,\n    resizeTimeout;\n\n  $special = $event.special.debouncedresize = {\n    setup: function() {\n      $(this).on(\"resize\", $special.handler);\n    },\n    teardown: function() {\n      $(this).off(\"resize\", $special.handler);\n    },\n    handler: function(event, execAsap) {\n      // Save the context\n      var context = this,\n        args = arguments,\n        dispatch = function() {\n          // set correct event type\n          event.type = \"debouncedresize\";\n          $event.dispatch.apply(context, args);\n        };\n\n      if (resizeTimeout) {\n        clearTimeout(resizeTimeout);\n      }\n\n      execAsap\n        ? dispatch()\n        : (resizeTimeout = setTimeout(dispatch, $special.threshold));\n    },\n    threshold: 150\n  };\n\n  $.BookBlock = function(options, element) {\n    this.$el = $(element);\n    this._init(options);\n  };\n\n  // the options\n  $.BookBlock.defaults = {\n    // vertical or horizontal flip\n    orientation: \"vertical\",\n    // ltr (left to right) or rtl (right to left)\n    direction: \"ltr\",\n    // speed for the flip transition in ms\n    speed: 1000,\n    // easing for the flip transition\n    easing: \"ease-in-out\",\n    // if set to true, both the flipping page and the sides will have an overlay to simulate shadows\n    shadows: true,\n    // opacity value for the \"shadow\" on both sides (when the flipping page is over it)\n    // value : 0.1 - 1\n    shadowSides: 0.2,\n    // opacity value for the \"shadow\" on the flipping page (while it is flipping)\n    // value : 0.1 - 1\n    shadowFlip: 0.1,\n    // if we should show the first item after reaching the end\n    circular: false,\n    // if we want to specify a selector that triggers the next() function. example: ´#bb-nav-next´\n    nextEl: \"\",\n    // if we want to specify a selector that triggers the prev() function\n    prevEl: \"\",\n    // autoplay. If true it overwrites the circular option to true\n    autoplay: false,\n    // time (ms) between page switch, if autoplay is true\n    interval: 3000,\n    // callback after the flip transition\n    // old is the index of the previous item\n    // page is the current item´s index\n    // isLimit is true if the current page is the last one (or the first one)\n    onEndFlip: function(old, page, isLimit) {\n      return false;\n    },\n    // callback before the flip transition\n    // page is the current item´s index\n    onBeforeFlip: function(page) {\n      return false;\n    }\n  };\n\n  $.BookBlock.prototype = {\n    _init: function(options) {\n      // options\n      this.options = $.extend(true, {}, $.BookBlock.defaults, options);\n      // orientation class\n      this.$el.addClass(\"bb-\" + this.options.orientation);\n      // items\n      this.$items = this.$el.children(\".bb-item\").hide();\n      // total items\n      this.itemsCount = this.$items.length;\n      // current item´s index\n      this.current = 0;\n      // previous item´s index\n      this.previous = -1;\n      // show first item\n      this.$current = this.$items.eq(this.current).show();\n      // get width of this.$el\n      // this will be necessary to create the flipping layout\n      this.elWidth = this.$el.width();\n      var transEndEventNames = {\n        WebkitTransition: \"webkitTransitionEnd\",\n        MozTransition: \"transitionend\",\n        OTransition: \"oTransitionEnd\",\n        msTransition: \"MSTransitionEnd\",\n        transition: \"transitionend\"\n      };\n      this.transEndEventName =\n        transEndEventNames[Modernizr.prefixed(\"transition\")] + \".bookblock\";\n      // support css 3d transforms && css transitions && Modernizr.csstransformspreserve3d\n      this.support =\n        Modernizr.csstransitions &&\n        Modernizr.csstransforms3d &&\n        Modernizr.csstransformspreserve3d;\n      // initialize/bind some events\n      this._initEvents();\n      // start slideshow\n      if (this.options.autoplay) {\n        this.options.circular = true;\n        this._startSlideshow();\n      }\n    },\n    _initEvents: function() {\n      var self = this;\n\n      if (this.options.nextEl !== \"\") {\n        $(this.options.nextEl).on(\n          \"click.bookblock touchstart.bookblock\",\n          function() {\n            self._action(\"next\");\n            return false;\n          }\n        );\n      }\n\n      if (this.options.prevEl !== \"\") {\n        $(this.options.prevEl).on(\n          \"click.bookblock touchstart.bookblock\",\n          function() {\n            self._action(\"prev\");\n            return false;\n          }\n        );\n      }\n\n      $window.on(\"debouncedresize\", function() {\n        // update width value\n        self.elWidth = self.$el.width();\n      });\n    },\n    _action: function(dir, page) {\n      this._stopSlideshow();\n      this._navigate(dir, page);\n    },\n    _navigate: function(dir, page) {\n      if (this.isAnimating) {\n        return false;\n      }\n\n      // callback trigger\n      this.options.onBeforeFlip(this.current);\n\n      this.isAnimating = true;\n      // update current value\n      this.$current = this.$items.eq(this.current);\n\n      if (page !== undefined) {\n        this.current = page;\n      } else if (\n        (dir === \"next\" && this.options.direction === \"ltr\") ||\n        (dir === \"prev\" && this.options.direction === \"rtl\")\n      ) {\n        if (!this.options.circular && this.current === this.itemsCount - 1) {\n          this.end = true;\n        } else {\n          this.previous = this.current;\n          this.current =\n            this.current < this.itemsCount - 1 ? this.current + 1 : 0;\n        }\n      } else if (\n        (dir === \"prev\" && this.options.direction === \"ltr\") ||\n        (dir === \"next\" && this.options.direction === \"rtl\")\n      ) {\n        if (!this.options.circular && this.current === 0) {\n          this.end = true;\n        } else {\n          this.previous = this.current;\n          this.current =\n            this.current > 0 ? this.current - 1 : this.itemsCount - 1;\n        }\n      }\n\n      this.$nextItem =\n        !this.options.circular && this.end\n          ? this.$current\n          : this.$items.eq(this.current);\n\n      if (!this.support) {\n        this._layoutNoSupport(dir);\n      } else {\n        this._layout(dir);\n      }\n    },\n    _layoutNoSupport: function(dir) {\n      this.$items.hide();\n      this.$nextItem.show();\n      this.end = false;\n      this.isAnimating = false;\n      var isLimit =\n        (dir === \"next\" && this.current === this.itemsCount - 1) ||\n        (dir === \"prev\" && this.current === 0);\n      // callback trigger\n      this.options.onEndFlip(this.previous, this.current, isLimit);\n    },\n    // creates the necessary layout for the 3d structure\n    _layout: function(dir) {\n      var self = this,\n        // basic structure: 1 element for the left side.\n        $s_left = this._addSide(\"left\", dir),\n        // 1 element for the flipping/middle page\n        $s_middle = this._addSide(\"middle\", dir),\n        // 1 element for the right side\n        $s_right = this._addSide(\"right\", dir),\n        // overlays\n        $o_left = $s_left.find(\"div.bb-overlay\"),\n        $o_middle_f = $s_middle.find(\"div.bb-flipoverlay:first\"),\n        $o_middle_b = $s_middle.find(\"div.bb-flipoverlay:last\"),\n        $o_right = $s_right.find(\"div.bb-overlay\"),\n        speed = this.end ? 400 : this.options.speed;\n\n      this.$items.hide();\n      this.$el.prepend($s_left, $s_middle, $s_right);\n\n      $s_middle\n        .css({\n          transitionDuration: speed + \"ms\",\n          transitionTimingFunction: this.options.easing\n        })\n        .on(this.transEndEventName, function(event) {\n          if ($(event.target).hasClass(\"bb-page\")) {\n            self.$el.children(\".bb-page\").remove();\n            self.$nextItem.show();\n            self.end = false;\n            self.isAnimating = false;\n            var isLimit =\n              (dir === \"next\" && self.current === self.itemsCount - 1) ||\n              (dir === \"prev\" && self.current === 0);\n            // callback trigger\n            self.options.onEndFlip(self.previous, self.current, isLimit);\n          }\n        });\n\n      if (dir === \"prev\") {\n        $s_middle.addClass(\"bb-flip-initial\");\n      }\n\n      // overlays\n      if (this.options.shadows && !this.end) {\n        var o_left_style =\n            dir === \"next\"\n              ? {\n                  transition:\n                    \"opacity \" +\n                    this.options.speed / 2 +\n                    \"ms \" +\n                    \"linear\" +\n                    \" \" +\n                    this.options.speed / 2 +\n                    \"ms\"\n                }\n              : {\n                  transition:\n                    \"opacity \" + this.options.speed / 2 + \"ms \" + \"linear\",\n                  opacity: this.options.shadowSides\n                },\n          o_middle_f_style =\n            dir === \"next\"\n              ? {\n                  transition:\n                    \"opacity \" + this.options.speed / 2 + \"ms \" + \"linear\"\n                }\n              : {\n                  transition:\n                    \"opacity \" +\n                    this.options.speed / 2 +\n                    \"ms \" +\n                    \"linear\" +\n                    \" \" +\n                    this.options.speed / 2 +\n                    \"ms\",\n                  opacity: this.options.shadowFlip\n                },\n          o_middle_b_style =\n            dir === \"next\"\n              ? {\n                  transition:\n                    \"opacity \" +\n                    this.options.speed / 2 +\n                    \"ms \" +\n                    \"linear\" +\n                    \" \" +\n                    this.options.speed / 2 +\n                    \"ms\",\n                  opacity: this.options.shadowFlip\n                }\n              : {\n                  transition:\n                    \"opacity \" + this.options.speed / 2 + \"ms \" + \"linear\"\n                },\n          o_right_style =\n            dir === \"next\"\n              ? {\n                  transition:\n                    \"opacity \" + this.options.speed / 2 + \"ms \" + \"linear\",\n                  opacity: this.options.shadowSides\n                }\n              : {\n                  transition:\n                    \"opacity \" +\n                    this.options.speed / 2 +\n                    \"ms \" +\n                    \"linear\" +\n                    \" \" +\n                    this.options.speed / 2 +\n                    \"ms\"\n                };\n\n        $o_middle_f.css(o_middle_f_style);\n        $o_middle_b.css(o_middle_b_style);\n        $o_left.css(o_left_style);\n        $o_right.css(o_right_style);\n      }\n\n      setTimeout(function() {\n        // first && last pages lift slightly up when we can't go further\n        $s_middle.addClass(\n          self.end ? \"bb-flip-\" + dir + \"-end\" : \"bb-flip-\" + dir\n        );\n\n        // overlays\n        if (self.options.shadows && !self.end) {\n          $o_middle_f.css({\n            opacity: dir === \"next\" ? self.options.shadowFlip : 0\n          });\n\n          $o_middle_b.css({\n            opacity: dir === \"next\" ? 0 : self.options.shadowFlip\n          });\n\n          $o_left.css({\n            opacity: dir === \"next\" ? self.options.shadowSides : 0\n          });\n\n          $o_right.css({\n            opacity: dir === \"next\" ? 0 : self.options.shadowSides\n          });\n        }\n      }, 25);\n    },\n    // adds the necessary sides (bb-page) to the layout\n    _addSide: function(side, dir) {\n      var $side;\n\n      switch (side) {\n        case \"left\":\n          /*\n\t\t\t\t\t\t<div class=\"bb-page\" style=\"z-index:102;\">\n\t\t\t\t\t\t\t<div class=\"bb-back\">\n\t\t\t\t\t\t\t\t<div class=\"bb-outer\">\n\t\t\t\t\t\t\t\t\t<div class=\"bb-content\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"bb-inner\">\n\t\t\t\t\t\t\t\t\t\t\tdir==='next' ? [content of current page] : [content of next page]\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"bb-overlay\"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t*/\n          $side = $(\n            '<div class=\"bb-page\"><div class=\"bb-back\"><div class=\"bb-outer\"><div class=\"bb-content\"><div class=\"bb-inner\">' +\n              (dir === \"next\" ? this.$current.html() : this.$nextItem.html()) +\n              '</div></div><div class=\"bb-overlay\"></div></div></div></div>'\n          ).css(\"z-index\", 102);\n          break;\n        case \"middle\":\n          /*\n\t\t\t\t\t\t<div class=\"bb-page\" style=\"z-index:103;\">\n\t\t\t\t\t\t\t<div class=\"bb-front\">\n\t\t\t\t\t\t\t\t<div class=\"bb-outer\">\n\t\t\t\t\t\t\t\t\t<div class=\"bb-content\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"bb-inner\">\n\t\t\t\t\t\t\t\t\t\t\tdir==='next' ? [content of current page] : [content of next page]\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"bb-flipoverlay\"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"bb-back\">\n\t\t\t\t\t\t\t\t<div class=\"bb-outer\">\n\t\t\t\t\t\t\t\t\t<div class=\"bb-content\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"bb-inner\">\n\t\t\t\t\t\t\t\t\t\t\tdir==='next' ? [content of next page] : [content of current page]\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"bb-flipoverlay\"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t*/\n          $side = $(\n            '<div class=\"bb-page\"><div class=\"bb-front\"><div class=\"bb-outer\"><div class=\"bb-content\"><div class=\"bb-inner\">' +\n              (dir === \"next\" ? this.$current.html() : this.$nextItem.html()) +\n              '</div></div><div class=\"bb-flipoverlay\"></div></div></div><div class=\"bb-back\"><div class=\"bb-outer\"><div class=\"bb-content\" style=\"width:' +\n              this.elWidth +\n              'px\"><div class=\"bb-inner\">' +\n              (dir === \"next\" ? this.$nextItem.html() : this.$current.html()) +\n              '</div></div><div class=\"bb-flipoverlay\"></div></div></div></div>'\n          ).css(\"z-index\", 103);\n          break;\n        case \"right\":\n          /*\n\t\t\t\t\t\t<div class=\"bb-page\" style=\"z-index:101;\">\n\t\t\t\t\t\t\t<div class=\"bb-front\">\n\t\t\t\t\t\t\t\t<div class=\"bb-outer\">\n\t\t\t\t\t\t\t\t\t<div class=\"bb-content\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"bb-inner\">\n\t\t\t\t\t\t\t\t\t\t\tdir==='next' ? [content of next page] : [content of current page]\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"bb-overlay\"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t*/\n          $side = $(\n            '<div class=\"bb-page\"><div class=\"bb-front\"><div class=\"bb-outer\"><div class=\"bb-content\"><div class=\"bb-inner\">' +\n              (dir === \"next\" ? this.$nextItem.html() : this.$current.html()) +\n              '</div></div><div class=\"bb-overlay\"></div></div></div></div>'\n          ).css(\"z-index\", 101);\n          break;\n      }\n\n      return $side;\n    },\n    _startSlideshow: function() {\n      var self = this;\n      this.slideshow = setTimeout(function() {\n        self._navigate(\"next\");\n        if (self.options.autoplay) {\n          self._startSlideshow();\n        }\n      }, this.options.interval);\n    },\n    _stopSlideshow: function() {\n      if (this.options.autoplay) {\n        clearTimeout(this.slideshow);\n        this.options.autoplay = false;\n      }\n    },\n    // public method: flips next\n    next: function() {\n      this._action(this.options.direction === \"ltr\" ? \"next\" : \"prev\");\n    },\n    // public method: flips back\n    prev: function() {\n      this._action(this.options.direction === \"ltr\" ? \"prev\" : \"next\");\n    },\n    // public method: goes to a specific page\n    jump: function(page) {\n      page -= 1;\n\n      if (page === this.current || page >= this.itemsCount || page < 0) {\n        return false;\n      }\n\n      var dir;\n      if (this.options.direction === \"ltr\") {\n        dir = page > this.current ? \"next\" : \"prev\";\n      } else {\n        dir = page > this.current ? \"prev\" : \"next\";\n      }\n      this._action(dir, page);\n    },\n    // public method: goes to the last page\n    last: function() {\n      this.jump(this.itemsCount);\n    },\n    // public method: goes to the first page\n    first: function() {\n      this.jump(1);\n    },\n    // public method: check if isAnimating is true\n    isActive: function() {\n      return this.isAnimating;\n    },\n    // public method: dynamically adds new elements\n    // call this method after inserting new \"bb-item\" elements inside the BookBlock\n    update: function() {\n      var $currentItem = this.$items.eq(this.current);\n      this.$items = this.$el.children(\".bb-item\");\n      this.itemsCount = this.$items.length;\n      this.current = $currentItem.index();\n    },\n    destroy: function() {\n      if (this.options.autoplay) {\n        this._stopSlideshow();\n      }\n      this.$el.removeClass(\"bb-\" + this.options.orientation);\n      this.$items.show();\n\n      if (this.options.nextEl !== \"\") {\n        $(this.options.nextEl).off(\".bookblock\");\n      }\n\n      if (this.options.prevEl !== \"\") {\n        $(this.options.prevEl).off(\".bookblock\");\n      }\n\n      $window.off(\"debouncedresize\");\n    }\n  };\n\n  var logError = function(message) {\n    if (window.console) {\n      window.console.error(message);\n    }\n  };\n\n  $.fn.bookblock = function(options) {\n    if (typeof options === \"string\") {\n      var args = Array.prototype.slice.call(arguments, 1);\n      this.each(function() {\n        var instance = $.data(this, `bookblock-${this.dataset.uid}`);\n        if (!instance) {\n          logError(\n            \"cannot call methods on bookblock prior to initialization; \" +\n              \"attempted to call method '\" +\n              options +\n              \"'\"\n          );\n          return;\n        }\n        if (!$.isFunction(instance[options]) || options.charAt(0) === \"_\") {\n          logError(\"no such method '\" + options + \"' for bookblock instance\");\n          return;\n        }\n        instance[options].apply(instance, args);\n      });\n    } else {\n      this.each(function() {\n        var instance = $.data(this, `bookblock-${this.dataset.uid}`);\n        if (instance) {\n          instance._init(instance.options);\n        } else {\n          instance = $.data(\n            this,\n            `bookblock-${this.dataset.uid}`,\n            new $.BookBlock(options, this)\n          );\n        }\n      });\n    }\n    return this;\n  };\n})(jQuery, window);\n","<template>\r\n  <div :key=\"componentKey\" :data-uid=\"uid\">\r\n    <slot></slot>\r\n    <!-- different version -->\r\n    <!-- <div\r\n      :key=\"`${index}-${nanoid}`\"\r\n      v-for=\"(item, index) in pages\"\r\n      class=\"bb-item\"\r\n    >\r\n      <slot name=\"page\" v-bind=\"{ item, index }\"></slot>\r\n    </div> -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport $ from \"jquery\";\r\nimport \"../../lib/modernizr-custom.js\";\r\nimport \"../../lib/jquerypp.custom.js\";\r\nimport \"../../lib/jquery.bookblock.modified.js\";\r\nimport { nanoid } from \"nanoid\";\r\n\r\nexport default {\r\n  name: \"Bookblock\", // vue component name\r\n  data() {\r\n    return {\r\n      nanoid: nanoid(),\r\n      componentKey: 0\r\n    };\r\n  },\r\n  props: {\r\n    options: {\r\n      type: Object,\r\n      default: () => {}\r\n    }\r\n    // different version\r\n    // pages: {\r\n    //   type: Array,\r\n    //   default: () => []\r\n    // }\r\n  },\r\n  watch: {\r\n    defaultOptions: {\r\n      handler(val) {\r\n        this.forceRerender(val);\r\n      },\r\n      deep: true,\r\n      immediate: true\r\n    }\r\n    // different version\r\n    // pages() {\r\n    //   this.update();\r\n    //   // this.forceRerender(this.defaultOptions);\r\n    // }\r\n  },\r\n  computed: {\r\n    uid() {\r\n      return `jopa-${this.nanoid}`;\r\n    },\r\n    selector() {\r\n      return `div[data-uid=${this.uid}]`;\r\n    },\r\n    defaultOptions() {\r\n      return {\r\n        // vertical or horizontal flip\r\n        orientation: \"horizontal\",\r\n\r\n        // ltr (left to right) or rtl (right to left)\r\n        direction: \"ltr\",\r\n\r\n        // speed for the flip transition in ms.\r\n        speed: 1000,\r\n\r\n        // easing for the flip transition.\r\n        easing: \"ease-in-out\",\r\n\r\n        // if set to true, both the flipping page and the sides will have an overlay to simulate shadows\r\n        shadows: true,\r\n\r\n        // opacity value for the \"shadow\" on both sides (when the flipping page is over it).\r\n        // value : 0.1 - 1\r\n        shadowSides: 0.2,\r\n\r\n        // opacity value for the \"shadow\" on the flipping page (while it is flipping).\r\n        // value : 0.1 - 1\r\n        shadowFlip: 0.1,\r\n\r\n        // if we should show the first item after reaching the end.\r\n        circular: false,\r\n\r\n        // if we want to specify a selector that triggers the next() function. example: '#bb-nav-next'.\r\n        nextEl: \"\",\r\n\r\n        // if we want to specify a selector that triggers the prev() function.\r\n        prevEl: \"\",\r\n\r\n        // If true it overwrites the circular option to true!\r\n        autoplay: false,\r\n\r\n        // time (ms) between page switch, if autoplay is true.\r\n        interval: 3000,\r\n\r\n        // callback after the flip transition.\r\n        // page is the current item's index.\r\n        // isLimit is true if the current page is the last one (or the first one).\r\n        onEndFlip: function(page, isLimit) {\r\n          return false;\r\n        },\r\n\r\n        // callback before the flip transition.\r\n        // page is the current item's index.\r\n        onBeforeFlip: function(page) {\r\n          return false;\r\n        },\r\n        ...this.options\r\n      };\r\n    }\r\n  },\r\n  mounted() {\r\n    this.forceRerender(this.defaultOptions);\r\n  },\r\n  methods: {\r\n    next() {\r\n      $(this.selector).bookblock(\"next\");\r\n    },\r\n    prev() {\r\n      $(this.selector).bookblock(\"prev\");\r\n    },\r\n    jump(position) {\r\n      $(this.selector).bookblock(\"jump\", position);\r\n    },\r\n    first() {\r\n      $(this.selector).bookblock(\"first\");\r\n    },\r\n    last() {\r\n      $(this.selector).bookblock(\"last\");\r\n    },\r\n    update() {\r\n      console.log(\"updated\");\r\n      $(this.selector).bookblock(\"update\");\r\n    },\r\n    destroy() {\r\n      $(this.selector).bookblock(\"destroy\");\r\n    },\r\n    forceRerender(val) {\r\n      this.nanoid = nanoid();\r\n      this.componentKey += 1;\r\n      this.$nextTick(() => $(this.selector).bookblock(val));\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.bb-bookblock {\r\n  width: 400px;\r\n  height: 300px;\r\n  margin: 0 auto;\r\n  position: relative;\r\n  z-index: 100;\r\n  -webkit-perspective: 1300px;\r\n  perspective: 1300px;\r\n  -webkit-backface-visibility: hidden;\r\n  backface-visibility: hidden;\r\n}\r\n\r\n.bb-page {\r\n  position: absolute;\r\n  -webkit-transform-style: preserve-3d;\r\n  transform-style: preserve-3d;\r\n  -webkit-transition-property: -webkit-transform;\r\n  transition-property: transform;\r\n}\r\n\r\n.bb-vertical .bb-page {\r\n  width: 50%;\r\n  height: 100%;\r\n  left: 50%;\r\n  -webkit-transform-origin: left center;\r\n  transform-origin: left center;\r\n}\r\n\r\n.bb-horizontal .bb-page {\r\n  width: 100%;\r\n  height: 50%;\r\n  top: 50%;\r\n  -webkit-transform-origin: center top;\r\n  transform-origin: center top;\r\n}\r\n\r\n.bb-page > div,\r\n.bb-outer,\r\n.bb-content,\r\n.bb-inner {\r\n  position: absolute;\r\n  height: 100%;\r\n  width: 100%;\r\n  top: 0;\r\n  left: 0;\r\n  -webkit-backface-visibility: hidden;\r\n  backface-visibility: hidden;\r\n}\r\n\r\n.bb-vertical .bb-content {\r\n  width: 200%;\r\n}\r\n\r\n.bb-horizontal .bb-content {\r\n  height: 200%;\r\n}\r\n\r\n.bb-page > div {\r\n  width: 100%;\r\n  -webkit-transform-style: preserve-3d;\r\n  transform-style: preserve-3d;\r\n}\r\n\r\n.bb-vertical .bb-back {\r\n  -webkit-transform: rotateY(-180deg);\r\n  transform: rotateY(-180deg);\r\n}\r\n\r\n.bb-horizontal .bb-back {\r\n  -webkit-transform: rotateX(-180deg);\r\n  transform: rotateX(-180deg);\r\n}\r\n\r\n.bb-outer {\r\n  width: 100%;\r\n  overflow: hidden;\r\n  z-index: 999;\r\n}\r\n\r\n.bb-overlay,\r\n.bb-flipoverlay {\r\n  background-color: rgba(0, 0, 0, 0.7);\r\n  position: absolute;\r\n  top: 0px;\r\n  left: 0px;\r\n  width: 100%;\r\n  height: 100%;\r\n  opacity: 0;\r\n}\r\n\r\n.bb-flipoverlay {\r\n  background-color: rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.bb-bookblock.bb-vertical > div.bb-page:first-child,\r\n.bb-bookblock.bb-vertical > div.bb-page:first-child .bb-back {\r\n  -webkit-transform: rotateY(180deg);\r\n  transform: rotateY(180deg);\r\n}\r\n\r\n.bb-bookblock.bb-horizontal > div.bb-page:first-child,\r\n.bb-bookblock.bb-horizontal > div.bb-page:first-child .bb-back {\r\n  -webkit-transform: rotateX(180deg);\r\n  transform: rotateX(180deg);\r\n}\r\n\r\n/* Content display */\r\n.bb-content {\r\n  background: #fff;\r\n}\r\n\r\n.bb-vertical .bb-front .bb-content {\r\n  left: -100%;\r\n}\r\n\r\n.bb-horizontal .bb-front .bb-content {\r\n  top: -100%;\r\n}\r\n\r\n/* Flipping classes */\r\n.bb-vertical .bb-flip-next,\r\n.bb-vertical .bb-flip-initial {\r\n  -webkit-transform: rotateY(-180deg);\r\n  transform: rotateY(-180deg);\r\n}\r\n\r\n.bb-vertical .bb-flip-prev {\r\n  -webkit-transform: rotateY(0deg);\r\n  transform: rotateY(0deg);\r\n}\r\n\r\n.bb-horizontal .bb-flip-next,\r\n.bb-horizontal .bb-flip-initial {\r\n  -webkit-transform: rotateX(180deg);\r\n  transform: rotateX(180deg);\r\n}\r\n\r\n.bb-horizontal .bb-flip-prev {\r\n  -webkit-transform: rotateX(0deg);\r\n  transform: rotateX(0deg);\r\n}\r\n\r\n.bb-vertical .bb-flip-next-end {\r\n  -webkit-transform: rotateY(-15deg);\r\n  transform: rotateY(-15deg);\r\n}\r\n\r\n.bb-vertical .bb-flip-prev-end {\r\n  -webkit-transform: rotateY(-165deg);\r\n  transform: rotateY(-165deg);\r\n}\r\n\r\n.bb-horizontal .bb-flip-next-end {\r\n  -webkit-transform: rotateX(15deg);\r\n  transform: rotateX(15deg);\r\n}\r\n\r\n.bb-horizontal .bb-flip-prev-end {\r\n  -webkit-transform: rotateX(165deg);\r\n  transform: rotateX(165deg);\r\n}\r\n\r\n.bb-item {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  display: none;\r\n  background: #fff;\r\n}\r\n\r\n/* No JS */\r\n.no-js .bb-bookblock,\r\n.no-js ul.bb-custom-grid li {\r\n  width: auto;\r\n  height: auto;\r\n}\r\n\r\n.no-js .bb-item {\r\n  display: block;\r\n  position: relative;\r\n}\r\n</style>\r\n","<template>\r\n  <div :key=\"componentKey\" :data-uid=\"uid\">\r\n    <div\r\n      :key=\"`${index}-${nanoid}`\"\r\n      v-for=\"(item, index) in pages\"\r\n      class=\"bb-item\"\r\n    >\r\n      <slot name=\"page\" v-bind=\"{ item, index }\"></slot>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport $ from \"jquery\";\r\nimport \"../../lib/modernizr-custom.js\";\r\nimport \"../../lib/jquerypp.custom.js\";\r\nimport \"../../lib/jquery.bookblock.modified.js\";\r\nimport { nanoid } from \"nanoid\";\r\n\r\nexport default {\r\n  name: \"Bookblock2\", // vue component name\r\n  data() {\r\n    return {\r\n      nanoid: nanoid(),\r\n      componentKey: 0\r\n    };\r\n  },\r\n  props: {\r\n    options: {\r\n      type: Object,\r\n      default: () => {}\r\n    },\r\n    pages: {\r\n      type: Array,\r\n      default: () => []\r\n    }\r\n  },\r\n  watch: {\r\n    defaultOptions: {\r\n      handler(val) {\r\n        this.forceRerender(val);\r\n      },\r\n      deep: true,\r\n      immediate: true\r\n    },\r\n    pages: {\r\n      handler() {\r\n        this.forceRerender(this.defaultOptions);\r\n      },\r\n      deep: true,\r\n      immediate: true\r\n    }\r\n  },\r\n  computed: {\r\n    uid() {\r\n      return `jopa-${this.nanoid}`;\r\n    },\r\n    selector() {\r\n      return `div[data-uid=${this.uid}]`;\r\n    },\r\n    defaultOptions() {\r\n      return {\r\n        // vertical or horizontal flip\r\n        orientation: \"horizontal\",\r\n\r\n        // ltr (left to right) or rtl (right to left)\r\n        direction: \"ltr\",\r\n\r\n        // speed for the flip transition in ms.\r\n        speed: 1000,\r\n\r\n        // easing for the flip transition.\r\n        easing: \"ease-in-out\",\r\n\r\n        // if set to true, both the flipping page and the sides will have an overlay to simulate shadows\r\n        shadows: true,\r\n\r\n        // opacity value for the \"shadow\" on both sides (when the flipping page is over it).\r\n        // value : 0.1 - 1\r\n        shadowSides: 0.2,\r\n\r\n        // opacity value for the \"shadow\" on the flipping page (while it is flipping).\r\n        // value : 0.1 - 1\r\n        shadowFlip: 0.1,\r\n\r\n        // if we should show the first item after reaching the end.\r\n        circular: false,\r\n\r\n        // if we want to specify a selector that triggers the next() function. example: '#bb-nav-next'.\r\n        nextEl: \"\",\r\n\r\n        // if we want to specify a selector that triggers the prev() function.\r\n        prevEl: \"\",\r\n\r\n        // If true it overwrites the circular option to true!\r\n        autoplay: false,\r\n\r\n        // time (ms) between page switch, if autoplay is true.\r\n        interval: 3000,\r\n\r\n        // callback after the flip transition.\r\n        // page is the current item's index.\r\n        // isLimit is true if the current page is the last one (or the first one).\r\n        onEndFlip: function(page, isLimit) {\r\n          return false;\r\n        },\r\n\r\n        // callback before the flip transition.\r\n        // page is the current item's index.\r\n        onBeforeFlip: function(page) {\r\n          return false;\r\n        },\r\n        ...this.options\r\n      };\r\n    }\r\n  },\r\n  mounted() {\r\n    this.forceRerender(this.defaultOptions);\r\n  },\r\n  methods: {\r\n    next() {\r\n      $(this.selector).bookblock(\"next\");\r\n    },\r\n    prev() {\r\n      $(this.selector).bookblock(\"prev\");\r\n    },\r\n    jump(position) {\r\n      $(this.selector).bookblock(\"jump\", position);\r\n    },\r\n    first() {\r\n      $(this.selector).bookblock(\"first\");\r\n    },\r\n    last() {\r\n      $(this.selector).bookblock(\"last\");\r\n    },\r\n    update() {\r\n      console.log(\"updated\");\r\n      $(this.selector).bookblock(\"update\");\r\n    },\r\n    destroy() {\r\n      $(this.selector).bookblock(\"destroy\");\r\n    },\r\n    forceRerender(val) {\r\n      if (this.pages.length === 1) {\r\n        val.autoplay = false;\r\n      }\r\n      this.nanoid = nanoid();\r\n      this.componentKey += 1;\r\n\r\n      this.$nextTick(() => {\r\n        $(this.selector).bookblock(val);\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.bb-bookblock {\r\n  width: 400px;\r\n  height: 300px;\r\n  margin: 0 auto;\r\n  position: relative;\r\n  z-index: 100;\r\n  -webkit-perspective: 1300px;\r\n  perspective: 1300px;\r\n  -webkit-backface-visibility: hidden;\r\n  backface-visibility: hidden;\r\n}\r\n\r\n.bb-page {\r\n  position: absolute;\r\n  -webkit-transform-style: preserve-3d;\r\n  transform-style: preserve-3d;\r\n  -webkit-transition-property: -webkit-transform;\r\n  transition-property: transform;\r\n}\r\n\r\n.bb-vertical .bb-page {\r\n  width: 50%;\r\n  height: 100%;\r\n  left: 50%;\r\n  -webkit-transform-origin: left center;\r\n  transform-origin: left center;\r\n}\r\n\r\n.bb-horizontal .bb-page {\r\n  width: 100%;\r\n  height: 50%;\r\n  top: 50%;\r\n  -webkit-transform-origin: center top;\r\n  transform-origin: center top;\r\n}\r\n\r\n.bb-page > div,\r\n.bb-outer,\r\n.bb-content,\r\n.bb-inner {\r\n  position: absolute;\r\n  height: 100%;\r\n  width: 100%;\r\n  top: 0;\r\n  left: 0;\r\n  -webkit-backface-visibility: hidden;\r\n  backface-visibility: hidden;\r\n}\r\n\r\n.bb-vertical .bb-content {\r\n  width: 200%;\r\n}\r\n\r\n.bb-horizontal .bb-content {\r\n  height: 200%;\r\n}\r\n\r\n.bb-page > div {\r\n  width: 100%;\r\n  -webkit-transform-style: preserve-3d;\r\n  transform-style: preserve-3d;\r\n}\r\n\r\n.bb-vertical .bb-back {\r\n  -webkit-transform: rotateY(-180deg);\r\n  transform: rotateY(-180deg);\r\n}\r\n\r\n.bb-horizontal .bb-back {\r\n  -webkit-transform: rotateX(-180deg);\r\n  transform: rotateX(-180deg);\r\n}\r\n\r\n.bb-outer {\r\n  width: 100%;\r\n  overflow: hidden;\r\n  z-index: 999;\r\n}\r\n\r\n.bb-overlay,\r\n.bb-flipoverlay {\r\n  background-color: rgba(0, 0, 0, 0.7);\r\n  position: absolute;\r\n  top: 0px;\r\n  left: 0px;\r\n  width: 100%;\r\n  height: 100%;\r\n  opacity: 0;\r\n}\r\n\r\n.bb-flipoverlay {\r\n  background-color: rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.bb-bookblock.bb-vertical > div.bb-page:first-child,\r\n.bb-bookblock.bb-vertical > div.bb-page:first-child .bb-back {\r\n  -webkit-transform: rotateY(180deg);\r\n  transform: rotateY(180deg);\r\n}\r\n\r\n.bb-bookblock.bb-horizontal > div.bb-page:first-child,\r\n.bb-bookblock.bb-horizontal > div.bb-page:first-child .bb-back {\r\n  -webkit-transform: rotateX(180deg);\r\n  transform: rotateX(180deg);\r\n}\r\n\r\n/* Content display */\r\n.bb-content {\r\n  background: #fff;\r\n}\r\n\r\n.bb-vertical .bb-front .bb-content {\r\n  left: -100%;\r\n}\r\n\r\n.bb-horizontal .bb-front .bb-content {\r\n  top: -100%;\r\n}\r\n\r\n/* Flipping classes */\r\n.bb-vertical .bb-flip-next,\r\n.bb-vertical .bb-flip-initial {\r\n  -webkit-transform: rotateY(-180deg);\r\n  transform: rotateY(-180deg);\r\n}\r\n\r\n.bb-vertical .bb-flip-prev {\r\n  -webkit-transform: rotateY(0deg);\r\n  transform: rotateY(0deg);\r\n}\r\n\r\n.bb-horizontal .bb-flip-next,\r\n.bb-horizontal .bb-flip-initial {\r\n  -webkit-transform: rotateX(180deg);\r\n  transform: rotateX(180deg);\r\n}\r\n\r\n.bb-horizontal .bb-flip-prev {\r\n  -webkit-transform: rotateX(0deg);\r\n  transform: rotateX(0deg);\r\n}\r\n\r\n.bb-vertical .bb-flip-next-end {\r\n  -webkit-transform: rotateY(-15deg);\r\n  transform: rotateY(-15deg);\r\n}\r\n\r\n.bb-vertical .bb-flip-prev-end {\r\n  -webkit-transform: rotateY(-165deg);\r\n  transform: rotateY(-165deg);\r\n}\r\n\r\n.bb-horizontal .bb-flip-next-end {\r\n  -webkit-transform: rotateX(15deg);\r\n  transform: rotateX(15deg);\r\n}\r\n\r\n.bb-horizontal .bb-flip-prev-end {\r\n  -webkit-transform: rotateX(165deg);\r\n  transform: rotateX(165deg);\r\n}\r\n\r\n.bb-item {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  display: none;\r\n  background: #fff;\r\n}\r\n\r\n/* No JS */\r\n.no-js .bb-bookblock,\r\n.no-js ul.bb-custom-grid li {\r\n  width: auto;\r\n  height: auto;\r\n}\r\n\r\n.no-js .bb-item {\r\n  display: block;\r\n  position: relative;\r\n}\r\n</style>\r\n","/* eslint-disable import/prefer-default-export */\nexport { default as Turn } from \"./turn.vue\";\nexport { default as Bookblock } from \"./bookblock.vue\";\nexport { default as Bookblock2 } from \"./bookblock2.vue\";\n","// Import vue components\nimport * as components from './lib-components';\n\n// install function executed by Vue.use()\nconst install = function installVueTurnjs(Vue) {\n  if (install.installed) return;\n  install.installed = true;\n  Object.entries(components).forEach(([componentName, component]) => {\n    Vue.component(componentName, component);\n  });\n};\n\n// Create module definition for Vue.use()\nconst plugin = {\n  install,\n};\n\n// To auto-install when vue is found\n// eslint-disable-next-line no-redeclare\n/* global window, global */\nlet GlobalVue = null;\nif (typeof window !== 'undefined') {\n  GlobalVue = window.Vue;\n} else if (typeof global !== 'undefined') {\n  GlobalVue = global.Vue;\n}\nif (GlobalVue) {\n  GlobalVue.use(plugin);\n}\n\n// Default export is library as a whole, registered via Vue.use()\nexport default plugin;\n\n// To allow individual component use, export components\n// each can be registered via Vue.component()\nexport * from './lib-components';\n"],"names":["$","has3d","hasRot","vendor","version","PI","Math","A90","isTouch","window","mouseEvents","down","move","up","over","out","corners","backward","forward","all","displays","directions","turnOptions","acceleration","display","duration","page","gradients","turnCorners","when","flipOptions","cornerSize","pagesInDOM","turnMethods","init","options","document","body","style","rotationAvailable","getPrefix","i","pageNum","data","ch","children","extend","width","height","direction","attr","css","opts","pageObjs","pages","pageWrap","pageZoom","pagePlace","pageMv","zoom","totalPages","eventHandlers","touchStart","proxy","_touchStart","touchMove","_touchMove","touchEnd","_touchEnd","start","_eventStart","has","bind","position","turn","transform","translate","length","_eventEnd","_eventPressed","_eventReleased","_flip","parent","done","addPage","element","currentPage","className","incPages","lastPage","destroying","exec","parseInt","turnError","_movePages","call","float","addClass","hasHardPage","hasClass","removeClass","_addPage","_removeFromDOM","_necessPage","class","overflow","append","appendTo","prop","_pageSize","_makeFlip","remove","hasPage","center","size","left","noCenter","view","tpage","marginLeft","destroy","flipbook","events","trigger","each","index","eventName","unbind","fparent","shadow","removeData","is","newZoom","currentView","iz","newWidth","round","newHeight","autoCenter","_updateShadow","top","right","pageWidth","pageHeight","odd","single","flip","next","disabled","_setPageLoc","_makeRange","range","remainingPages","_view","floor","min","max","_removePageFromDOM","dd","flipMethods","_moveFoldingPage","f","fwrapper","_removeMv","removePage","_fitPage","from","change","that","currentDisplay","undefined","inArray","dir","toLowerCase","animating","corner","disable","resize","splice","_addMv","push","stop","ignore","animate","force","_missing","p","missing","newView","_turnPage","current","place","optsCorners","split","flipData","actualPoint","point","effect","pop","previous","shift","peel","indexOf","_addMotionPage","e","actualZoom","isDefaultPrevented","charAt","target","turned","turnData","mouseAction","time","Date","getTime","outArea","x","preventDefault","stopPropagation","apply","arguments","_eventMove","calculateZ","mv","nextPage","placePage","dpage","total","r","pageZ","partZ","pageV","addView","abs","update","fixed","pos","actualView","zIndex","pageLocation","view2","divAtt","loc","hover","_addPageWrapper","setData","d","z","_cAllowed","_cornerActivated","y","csz","allowedCorners","_isIArea","offset","originalEvent","touches","pageX","pageY","_c","point2D","_c2","_foldingPage","_backGradient","gradient","bshadow","type","full","wrapper","fpage","ashadow","sqrt","pow","findPos","cssProperties","prepend","hide","flips","bottom","cursor","_fold","o","leftPos","gradientX","fpageOrigin","parentOrigin","parentCss","relX","angle","half","backgroundColor","opacity","a","px","gradientEndPointA","gradientEndPointB","gradientStartVal","gradientSize","gradientOpacity","shadowVal","df","tr","folding","ac","h","substr","compute","rel","middle","alpha","atan2","gamma","distance","sin","deg","cos","tan","beta","side","sideX","sideY","endingPoint","far","c","mvW","mvH","cssA","cssB","aliasingFk","origin","rotate","_showFoldedPage","visible","status","animatef","to","frame","v","turning","show","shadows","bshadowLoc","hideFoldedPage","p1","p4","delta","p2","p3","np","bezier","complete","hiding","turnPage","elevation","moving","isTurning","dec","methods","args","Array","prototype","slice","overf","t","b","radians","parts","navigator","userAgent","webkitVersion","parseFloat","use3d","degrees","property","object","Object","hasOwnProperty","vendorPrefixes","len","getTransitionEnd","el","createElement","transitions","transition","OTransition","MSTransition","MozTransition","WebkitTransition","obj","p0","colors","numColors","j","cols","join","dx","dy","angle2","diagonal","gradientDiagonal","slope","inverse","segA","context","event","Event","isPropagationStopped","message","TurnJsError","name","Error","constructor","offsetLeft","offsetTop","offsetParent","requestAnim","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","fn","properties","diff","timeDiff","easing","cssPrefix","cssTransitionEnd","jQuery","tests","ModernizrProto","_version","_config","classPrefix","enableClasses","enableJSClass","usePrefixes","_q","on","test","cb","self","addTest","addAsyncTest","Modernizr","classes","testRunner","featureNames","feature","aliasIdx","result","nameIdx","featureName","featureNameSplit","featureIdx","aliases","Boolean","hasOwnProp","_hasOwnProperty","cssToDOM","replace","str","m1","m2","toUpperCase","newSyntax","CSS","oldSyntax","docElement","documentElement","isSVG","nodeName","setClasses","baseVal","reJS","RegExp","_l","_trigger","res","cbs","key","last","createElementNS","outerAnchor","innerAnchor","supports","cssText","appendChild","getBoundingClientRect","removeChild","getBody","fake","injectElementWithStyles","rule","nodes","testnames","mod","ret","node","docOverflow","div","id","styleSheet","createTextNode","background","parentNode","offsetHeight","testStyles","omPrefixes","cssomPrefixes","_cssomPrefixes","atRule","prefixes","cssrule","CSSRule","prefix","thisRule","domPrefixes","_domPrefixes","contains","fnBind","testDOMProps","props","elem","item","modElem","mStyle","unshift","domToCSS","computedStyle","pseudo","getComputedStyle","console","getPropertyValue","method","error","currentStyle","nativeTestProps","value","conditionText","testProps","prefixed","skipValueTest","afterInit","propsLength","before","elems","cleanElems","testPropsAll","ucProp","testAllProps","findHelper","types","selector","typeHandlers","handle","namespaces","namespace","match","sort","origHandler","handler","find","_data","handlers","findBySelector","selectors","add","select","supportTouch","respondsTo","isArray","triggerHandled","handled","setupHelper","startingEvent","onFirst","handleObj","bySelector","delegate","undelegate","special","setup","teardown","isPhantom","scrollEvent","touchStartEvent","touchStopEvent","touchMoveEvent","coords","swipe","delay","ev","delegateTarget","currentTarget","entered","moveHandler","one","deltaX","deltaY","end","$window","val","$event","$special","resizeTimeout","debouncedresize","off","execAsap","dispatch","clearTimeout","threshold","BookBlock","$el","_init","defaults","orientation","speed","shadowSides","shadowFlip","circular","nextEl","prevEl","autoplay","interval","onEndFlip","old","isLimit","onBeforeFlip","$items","itemsCount","$current","eq","elWidth","transEndEventNames","msTransition","transEndEventName","support","csstransitions","csstransforms3d","csstransformspreserve3d","_initEvents","_startSlideshow","_action","_stopSlideshow","_navigate","isAnimating","$nextItem","_layoutNoSupport","_layout","$s_left","_addSide","$s_middle","$s_right","$o_left","$o_middle_f","$o_middle_b","$o_right","transitionDuration","transitionTimingFunction","o_left_style","o_middle_f_style","o_middle_b_style","o_right_style","$side","html","slideshow","prev","jump","first","isActive","$currentItem","logError","bookblock","instance","dataset","uid","isFunction","install","installVueTurnjs","Vue","installed","entries","components","forEach","componentName","component","plugin","GlobalVue","global","use"],"mappings":"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"}